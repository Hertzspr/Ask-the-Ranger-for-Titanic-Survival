{"cells":[{"source":"<a href=\"https://www.kaggle.com/code/husadahertzsprung/ask-the-ranger-for-titanic-survival?scriptVersionId=91845585\" target=\"_blank\"><img align=\"left\" alt=\"Kaggle\" title=\"Open in Kaggle\" src=\"https://kaggle.com/static/images/open-in-kaggle.svg\"></a>","metadata":{},"cell_type":"markdown","outputs":[],"execution_count":0},{"cell_type":"markdown","id":"61e6993b","metadata":{"_cell_guid":"a9a3fcf7-eeda-4fa5-87bd-1d8d22180a76","_uuid":"d3ea6aab-1671-484c-a36c-834ad45c9e2b","papermill":{"duration":0.095322,"end_time":"2022-04-01T13:50:48.218587","exception":false,"start_time":"2022-04-01T13:50:48.123265","status":"completed"},"tags":[]},"source":["# **TITANIC SURVIVAL PREDICTION**"]},{"cell_type":"markdown","id":"2408a5d4","metadata":{"papermill":{"duration":0.092322,"end_time":"2022-04-01T13:50:48.403279","exception":false,"start_time":"2022-04-01T13:50:48.310957","status":"completed"},"tags":[]},"source":["---\n","* [Data Preparation](#section-one)\n","   - [Joining to Impute](#subone-1)\n","   - [Fare Imputation](#subone-2)\n","   - [Embarked Imputation](#subone-3)\n","   - [Cabin Imputation](#subone-4)\n","   - [Age Imputation](#subone-5)\n","* [Ask The Ranger](#section-two)\n","    - [Data Split](#subtwo-1)\n","    - [Random Forest Prediction](#subtwo-2)\n","---"]},{"cell_type":"markdown","id":"63d6149e","metadata":{"_cell_guid":"ce38ef1c-56ba-4381-b7d4-aff531f5e9ff","_uuid":"2d1ebb94-3ee3-4a00-b603-7e0eff90af04","papermill":{"duration":0.092611,"end_time":"2022-04-01T13:50:48.587827","exception":false,"start_time":"2022-04-01T13:50:48.495216","status":"completed"},"tags":[]},"source":["<a id=\"section-one\"></a>\n","# *Data Preparation*"]},{"cell_type":"markdown","id":"4c8ed475","metadata":{"papermill":{"duration":0.091759,"end_time":"2022-04-01T13:50:48.771853","exception":false,"start_time":"2022-04-01T13:50:48.680094","status":"completed"},"tags":[]},"source":["<a id=\"subone-1\"></a>\n","### Joining to Impute"]},{"cell_type":"markdown","id":"3bf08300","metadata":{"_cell_guid":"db760f47-3c5f-4c1a-802f-cdcbfea48bc4","_uuid":"dd61f50f-02c5-4444-9bb0-eeae1d8ab432","papermill":{"duration":0.091606,"end_time":"2022-04-01T13:50:48.95644","exception":false,"start_time":"2022-04-01T13:50:48.864834","status":"completed"},"tags":[]},"source":["1. Import and get a grip of the data"]},{"cell_type":"code","execution_count":1,"id":"8a316f2b","metadata":{"_cell_guid":"8324fbf4-82ee-4554-8ef3-f10a5fbead5f","_uuid":"808890b2-a8aa-44a5-8f89-4fbc9d845b47","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:49.148806Z","iopub.status.busy":"2022-04-01T13:50:49.146143Z","iopub.status.idle":"2022-04-01T13:50:50.901785Z","shell.execute_reply":"2022-04-01T13:50:50.899998Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":1.852663,"end_time":"2022-04-01T13:50:50.901952","exception":false,"start_time":"2022-04-01T13:50:49.049289","status":"completed"},"tags":[]},"outputs":[{"name":"stderr","output_type":"stream","text":["── \u001b[1mAttaching packages\u001b[22m ─────────────────────────────────────── tidyverse 1.3.1 ──\n","\n","\u001b[32m✔\u001b[39m \u001b[34mggplot2\u001b[39m 3.3.5     \u001b[32m✔\u001b[39m \u001b[34mpurrr  \u001b[39m 0.3.4\n","\u001b[32m✔\u001b[39m \u001b[34mtibble \u001b[39m 3.1.5     \u001b[32m✔\u001b[39m \u001b[34mdplyr  \u001b[39m 1.0.7\n","\u001b[32m✔\u001b[39m \u001b[34mtidyr  \u001b[39m 1.1.4     \u001b[32m✔\u001b[39m \u001b[34mstringr\u001b[39m 1.4.0\n","\u001b[32m✔\u001b[39m \u001b[34mreadr  \u001b[39m 2.0.2     \u001b[32m✔\u001b[39m \u001b[34mforcats\u001b[39m 0.5.1\n","\n","── \u001b[1mConflicts\u001b[22m ────────────────────────────────────────── tidyverse_conflicts() ──\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mfilter()\u001b[39m masks \u001b[34mstats\u001b[39m::filter()\n","\u001b[31m✖\u001b[39m \u001b[34mdplyr\u001b[39m::\u001b[32mlag()\u001b[39m    masks \u001b[34mstats\u001b[39m::lag()\n","\n","\u001b[1m\u001b[1mRows: \u001b[1m\u001b[22m\u001b[34m\u001b[34m891\u001b[34m\u001b[39m \u001b[1m\u001b[1mColumns: \u001b[1m\u001b[22m\u001b[34m\u001b[34m12\u001b[34m\u001b[39m\n","\n","\u001b[36m──\u001b[39m \u001b[1m\u001b[1mColumn specification\u001b[1m\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m (5): Name, Sex, Ticket, Cabin, Embarked\n","\u001b[32mdbl\u001b[39m (7): PassengerId, Survived, Pclass, Age, SibSp, Parch, Fare\n","\n","\n","\u001b[36mℹ\u001b[39m Use \u001b[30m\u001b[47m\u001b[30m\u001b[47m`spec()`\u001b[47m\u001b[30m\u001b[49m\u001b[39m to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set \u001b[30m\u001b[47m\u001b[30m\u001b[47m`show_col_types = FALSE`\u001b[47m\u001b[30m\u001b[49m\u001b[39m to quiet this message.\n","\n"]},{"name":"stdout","output_type":"stream","text":["spec_tbl_df [891 × 12] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n"," $ PassengerId: num [1:891] 1 2 3 4 5 6 7 8 9 10 ...\n"," $ Survived   : num [1:891] 0 1 1 1 0 0 0 0 1 1 ...\n"," $ Pclass     : num [1:891] 3 1 3 1 3 3 1 3 3 2 ...\n"," $ Name       : chr [1:891] \"Braund, Mr. Owen Harris\" \"Cumings, Mrs. John Bradley (Florence Briggs Thayer)\" \"Heikkinen, Miss. Laina\" \"Futrelle, Mrs. Jacques Heath (Lily May Peel)\" ...\n"," $ Sex        : chr [1:891] \"male\" \"female\" \"female\" \"female\" ...\n"," $ Age        : num [1:891] 22 38 26 35 35 NA 54 2 27 14 ...\n"," $ SibSp      : num [1:891] 1 1 0 1 0 0 0 3 0 1 ...\n"," $ Parch      : num [1:891] 0 0 0 0 0 0 0 1 2 0 ...\n"," $ Ticket     : chr [1:891] \"A/5 21171\" \"PC 17599\" \"STON/O2. 3101282\" \"113803\" ...\n"," $ Fare       : num [1:891] 7.25 71.28 7.92 53.1 8.05 ...\n"," $ Cabin      : chr [1:891] NA \"C85\" NA \"C123\" ...\n"," $ Embarked   : chr [1:891] \"S\" \"C\" \"S\" \"S\" ...\n"," - attr(*, \"spec\")=\n","  .. cols(\n","  ..   PassengerId = \u001b[32mcol_double()\u001b[39m,\n","  ..   Survived = \u001b[32mcol_double()\u001b[39m,\n","  ..   Pclass = \u001b[32mcol_double()\u001b[39m,\n","  ..   Name = \u001b[31mcol_character()\u001b[39m,\n","  ..   Sex = \u001b[31mcol_character()\u001b[39m,\n","  ..   Age = \u001b[32mcol_double()\u001b[39m,\n","  ..   SibSp = \u001b[32mcol_double()\u001b[39m,\n","  ..   Parch = \u001b[32mcol_double()\u001b[39m,\n","  ..   Ticket = \u001b[31mcol_character()\u001b[39m,\n","  ..   Fare = \u001b[32mcol_double()\u001b[39m,\n","  ..   Cabin = \u001b[31mcol_character()\u001b[39m,\n","  ..   Embarked = \u001b[31mcol_character()\u001b[39m\n","  .. )\n"," - attr(*, \"problems\")=<externalptr> \n"]},{"data":{"text/plain":["  PassengerId       Survived          Pclass          Name          \n"," Min.   :  1.0   Min.   :0.0000   Min.   :1.000   Length:891        \n"," 1st Qu.:223.5   1st Qu.:0.0000   1st Qu.:2.000   Class :character  \n"," Median :446.0   Median :0.0000   Median :3.000   Mode  :character  \n"," Mean   :446.0   Mean   :0.3838   Mean   :2.309                     \n"," 3rd Qu.:668.5   3rd Qu.:1.0000   3rd Qu.:3.000                     \n"," Max.   :891.0   Max.   :1.0000   Max.   :3.000                     \n","                                                                    \n","     Sex                 Age            SibSp           Parch       \n"," Length:891         Min.   : 0.42   Min.   :0.000   Min.   :0.0000  \n"," Class :character   1st Qu.:20.12   1st Qu.:0.000   1st Qu.:0.0000  \n"," Mode  :character   Median :28.00   Median :0.000   Median :0.0000  \n","                    Mean   :29.70   Mean   :0.523   Mean   :0.3816  \n","                    3rd Qu.:38.00   3rd Qu.:1.000   3rd Qu.:0.0000  \n","                    Max.   :80.00   Max.   :8.000   Max.   :6.0000  \n","                    NA's   :177                                     \n","    Ticket               Fare           Cabin             Embarked        \n"," Length:891         Min.   :  0.00   Length:891         Length:891        \n"," Class :character   1st Qu.:  7.91   Class :character   Class :character  \n"," Mode  :character   Median : 14.45   Mode  :character   Mode  :character  \n","                    Mean   : 32.20                                        \n","                    3rd Qu.: 31.00                                        \n","                    Max.   :512.33                                        \n","                                                                          "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 6 × 12</caption>\n","<thead>\n","\t<tr><th scope=col>PassengerId</th><th scope=col>Survived</th><th scope=col>Pclass</th><th scope=col>Name</th><th scope=col>Sex</th><th scope=col>Age</th><th scope=col>SibSp</th><th scope=col>Parch</th><th scope=col>Ticket</th><th scope=col>Fare</th><th scope=col>Cabin</th><th scope=col>Embarked</th></tr>\n","\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1</td><td>0</td><td>3</td><td>Braund, Mr. Owen Harris                            </td><td>male  </td><td>22</td><td>1</td><td>0</td><td>A/5 21171       </td><td> 7.2500</td><td>NA  </td><td>S</td></tr>\n","\t<tr><td>2</td><td>1</td><td>1</td><td>Cumings, Mrs. John Bradley (Florence Briggs Thayer)</td><td>female</td><td>38</td><td>1</td><td>0</td><td>PC 17599        </td><td>71.2833</td><td>C85 </td><td>C</td></tr>\n","\t<tr><td>3</td><td>1</td><td>3</td><td>Heikkinen, Miss. Laina                             </td><td>female</td><td>26</td><td>0</td><td>0</td><td>STON/O2. 3101282</td><td> 7.9250</td><td>NA  </td><td>S</td></tr>\n","\t<tr><td>4</td><td>1</td><td>1</td><td>Futrelle, Mrs. Jacques Heath (Lily May Peel)       </td><td>female</td><td>35</td><td>1</td><td>0</td><td>113803          </td><td>53.1000</td><td>C123</td><td>S</td></tr>\n","\t<tr><td>5</td><td>0</td><td>3</td><td>Allen, Mr. William Henry                           </td><td>male  </td><td>35</td><td>0</td><td>0</td><td>373450          </td><td> 8.0500</td><td>NA  </td><td>S</td></tr>\n","\t<tr><td>6</td><td>0</td><td>3</td><td>Moran, Mr. James                                   </td><td>male  </td><td>NA</td><td>0</td><td>0</td><td>330877          </td><td> 8.4583</td><td>NA  </td><td>Q</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 6 × 12\n","\\begin{tabular}{llllllllllll}\n"," PassengerId & Survived & Pclass & Name & Sex & Age & SibSp & Parch & Ticket & Fare & Cabin & Embarked\\\\\n"," <dbl> & <dbl> & <dbl> & <chr> & <chr> & <dbl> & <dbl> & <dbl> & <chr> & <dbl> & <chr> & <chr>\\\\\n","\\hline\n","\t 1 & 0 & 3 & Braund, Mr. Owen Harris                             & male   & 22 & 1 & 0 & A/5 21171        &  7.2500 & NA   & S\\\\\n","\t 2 & 1 & 1 & Cumings, Mrs. John Bradley (Florence Briggs Thayer) & female & 38 & 1 & 0 & PC 17599         & 71.2833 & C85  & C\\\\\n","\t 3 & 1 & 3 & Heikkinen, Miss. Laina                              & female & 26 & 0 & 0 & STON/O2. 3101282 &  7.9250 & NA   & S\\\\\n","\t 4 & 1 & 1 & Futrelle, Mrs. Jacques Heath (Lily May Peel)        & female & 35 & 1 & 0 & 113803           & 53.1000 & C123 & S\\\\\n","\t 5 & 0 & 3 & Allen, Mr. William Henry                            & male   & 35 & 0 & 0 & 373450           &  8.0500 & NA   & S\\\\\n","\t 6 & 0 & 3 & Moran, Mr. James                                    & male   & NA & 0 & 0 & 330877           &  8.4583 & NA   & Q\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 6 × 12\n","\n","| PassengerId &lt;dbl&gt; | Survived &lt;dbl&gt; | Pclass &lt;dbl&gt; | Name &lt;chr&gt; | Sex &lt;chr&gt; | Age &lt;dbl&gt; | SibSp &lt;dbl&gt; | Parch &lt;dbl&gt; | Ticket &lt;chr&gt; | Fare &lt;dbl&gt; | Cabin &lt;chr&gt; | Embarked &lt;chr&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|---|\n","| 1 | 0 | 3 | Braund, Mr. Owen Harris                             | male   | 22 | 1 | 0 | A/5 21171        |  7.2500 | NA   | S |\n","| 2 | 1 | 1 | Cumings, Mrs. John Bradley (Florence Briggs Thayer) | female | 38 | 1 | 0 | PC 17599         | 71.2833 | C85  | C |\n","| 3 | 1 | 3 | Heikkinen, Miss. Laina                              | female | 26 | 0 | 0 | STON/O2. 3101282 |  7.9250 | NA   | S |\n","| 4 | 1 | 1 | Futrelle, Mrs. Jacques Heath (Lily May Peel)        | female | 35 | 1 | 0 | 113803           | 53.1000 | C123 | S |\n","| 5 | 0 | 3 | Allen, Mr. William Henry                            | male   | 35 | 0 | 0 | 373450           |  8.0500 | NA   | S |\n","| 6 | 0 | 3 | Moran, Mr. James                                    | male   | NA | 0 | 0 | 330877           |  8.4583 | NA   | Q |\n","\n"],"text/plain":["  PassengerId Survived Pclass\n","1 1           0        3     \n","2 2           1        1     \n","3 3           1        3     \n","4 4           1        1     \n","5 5           0        3     \n","6 6           0        3     \n","  Name                                                Sex    Age SibSp Parch\n","1 Braund, Mr. Owen Harris                             male   22  1     0    \n","2 Cumings, Mrs. John Bradley (Florence Briggs Thayer) female 38  1     0    \n","3 Heikkinen, Miss. Laina                              female 26  0     0    \n","4 Futrelle, Mrs. Jacques Heath (Lily May Peel)        female 35  1     0    \n","5 Allen, Mr. William Henry                            male   35  0     0    \n","6 Moran, Mr. James                                    male   NA  0     0    \n","  Ticket           Fare    Cabin Embarked\n","1 A/5 21171         7.2500 NA    S       \n","2 PC 17599         71.2833 C85   C       \n","3 STON/O2. 3101282  7.9250 NA    S       \n","4 113803           53.1000 C123  S       \n","5 373450            8.0500 NA    S       \n","6 330877            8.4583 NA    Q       "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 6 × 12</caption>\n","<thead>\n","\t<tr><th scope=col>PassengerId</th><th scope=col>Survived</th><th scope=col>Pclass</th><th scope=col>Name</th><th scope=col>Sex</th><th scope=col>Age</th><th scope=col>SibSp</th><th scope=col>Parch</th><th scope=col>Ticket</th><th scope=col>Fare</th><th scope=col>Cabin</th><th scope=col>Embarked</th></tr>\n","\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>886</td><td>0</td><td>3</td><td>Rice, Mrs. William (Margaret Norton)    </td><td>female</td><td>39</td><td>0</td><td>5</td><td>382652    </td><td>29.125</td><td>NA  </td><td>Q</td></tr>\n","\t<tr><td>887</td><td>0</td><td>2</td><td>Montvila, Rev. Juozas                   </td><td>male  </td><td>27</td><td>0</td><td>0</td><td>211536    </td><td>13.000</td><td>NA  </td><td>S</td></tr>\n","\t<tr><td>888</td><td>1</td><td>1</td><td>Graham, Miss. Margaret Edith            </td><td>female</td><td>19</td><td>0</td><td>0</td><td>112053    </td><td>30.000</td><td>B42 </td><td>S</td></tr>\n","\t<tr><td>889</td><td>0</td><td>3</td><td>Johnston, Miss. Catherine Helen \"Carrie\"</td><td>female</td><td>NA</td><td>1</td><td>2</td><td>W./C. 6607</td><td>23.450</td><td>NA  </td><td>S</td></tr>\n","\t<tr><td>890</td><td>1</td><td>1</td><td>Behr, Mr. Karl Howell                   </td><td>male  </td><td>26</td><td>0</td><td>0</td><td>111369    </td><td>30.000</td><td>C148</td><td>C</td></tr>\n","\t<tr><td>891</td><td>0</td><td>3</td><td>Dooley, Mr. Patrick                     </td><td>male  </td><td>32</td><td>0</td><td>0</td><td>370376    </td><td> 7.750</td><td>NA  </td><td>Q</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 6 × 12\n","\\begin{tabular}{llllllllllll}\n"," PassengerId & Survived & Pclass & Name & Sex & Age & SibSp & Parch & Ticket & Fare & Cabin & Embarked\\\\\n"," <dbl> & <dbl> & <dbl> & <chr> & <chr> & <dbl> & <dbl> & <dbl> & <chr> & <dbl> & <chr> & <chr>\\\\\n","\\hline\n","\t 886 & 0 & 3 & Rice, Mrs. William (Margaret Norton)     & female & 39 & 0 & 5 & 382652     & 29.125 & NA   & Q\\\\\n","\t 887 & 0 & 2 & Montvila, Rev. Juozas                    & male   & 27 & 0 & 0 & 211536     & 13.000 & NA   & S\\\\\n","\t 888 & 1 & 1 & Graham, Miss. Margaret Edith             & female & 19 & 0 & 0 & 112053     & 30.000 & B42  & S\\\\\n","\t 889 & 0 & 3 & Johnston, Miss. Catherine Helen \"Carrie\" & female & NA & 1 & 2 & W./C. 6607 & 23.450 & NA   & S\\\\\n","\t 890 & 1 & 1 & Behr, Mr. Karl Howell                    & male   & 26 & 0 & 0 & 111369     & 30.000 & C148 & C\\\\\n","\t 891 & 0 & 3 & Dooley, Mr. Patrick                      & male   & 32 & 0 & 0 & 370376     &  7.750 & NA   & Q\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 6 × 12\n","\n","| PassengerId &lt;dbl&gt; | Survived &lt;dbl&gt; | Pclass &lt;dbl&gt; | Name &lt;chr&gt; | Sex &lt;chr&gt; | Age &lt;dbl&gt; | SibSp &lt;dbl&gt; | Parch &lt;dbl&gt; | Ticket &lt;chr&gt; | Fare &lt;dbl&gt; | Cabin &lt;chr&gt; | Embarked &lt;chr&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|---|\n","| 886 | 0 | 3 | Rice, Mrs. William (Margaret Norton)     | female | 39 | 0 | 5 | 382652     | 29.125 | NA   | Q |\n","| 887 | 0 | 2 | Montvila, Rev. Juozas                    | male   | 27 | 0 | 0 | 211536     | 13.000 | NA   | S |\n","| 888 | 1 | 1 | Graham, Miss. Margaret Edith             | female | 19 | 0 | 0 | 112053     | 30.000 | B42  | S |\n","| 889 | 0 | 3 | Johnston, Miss. Catherine Helen \"Carrie\" | female | NA | 1 | 2 | W./C. 6607 | 23.450 | NA   | S |\n","| 890 | 1 | 1 | Behr, Mr. Karl Howell                    | male   | 26 | 0 | 0 | 111369     | 30.000 | C148 | C |\n","| 891 | 0 | 3 | Dooley, Mr. Patrick                      | male   | 32 | 0 | 0 | 370376     |  7.750 | NA   | Q |\n","\n"],"text/plain":["  PassengerId Survived Pclass Name                                     Sex   \n","1 886         0        3      Rice, Mrs. William (Margaret Norton)     female\n","2 887         0        2      Montvila, Rev. Juozas                    male  \n","3 888         1        1      Graham, Miss. Margaret Edith             female\n","4 889         0        3      Johnston, Miss. Catherine Helen \"Carrie\" female\n","5 890         1        1      Behr, Mr. Karl Howell                    male  \n","6 891         0        3      Dooley, Mr. Patrick                      male  \n","  Age SibSp Parch Ticket     Fare   Cabin Embarked\n","1 39  0     5     382652     29.125 NA    Q       \n","2 27  0     0     211536     13.000 NA    S       \n","3 19  0     0     112053     30.000 B42   S       \n","4 NA  1     2     W./C. 6607 23.450 NA    S       \n","5 26  0     0     111369     30.000 C148  C       \n","6 32  0     0     370376      7.750 NA    Q       "]},"metadata":{},"output_type":"display_data"},{"name":"stderr","output_type":"stream","text":["\u001b[1m\u001b[1mRows: \u001b[1m\u001b[22m\u001b[34m\u001b[34m418\u001b[34m\u001b[39m \u001b[1m\u001b[1mColumns: \u001b[1m\u001b[22m\u001b[34m\u001b[34m11\u001b[34m\u001b[39m\n","\n","\u001b[36m──\u001b[39m \u001b[1m\u001b[1mColumn specification\u001b[1m\u001b[22m \u001b[36m────────────────────────────────────────────────────────\u001b[39m\n","\u001b[1mDelimiter:\u001b[22m \",\"\n","\u001b[31mchr\u001b[39m (5): Name, Sex, Ticket, Cabin, Embarked\n","\u001b[32mdbl\u001b[39m (6): PassengerId, Pclass, Age, SibSp, Parch, Fare\n","\n","\n","\u001b[36mℹ\u001b[39m Use \u001b[30m\u001b[47m\u001b[30m\u001b[47m`spec()`\u001b[47m\u001b[30m\u001b[49m\u001b[39m to retrieve the full column specification for this data.\n","\u001b[36mℹ\u001b[39m Specify the column types or set \u001b[30m\u001b[47m\u001b[30m\u001b[47m`show_col_types = FALSE`\u001b[47m\u001b[30m\u001b[49m\u001b[39m to quiet this message.\n","\n"]},{"name":"stdout","output_type":"stream","text":["spec_tbl_df [418 × 11] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n"," $ PassengerId: num [1:418] 892 893 894 895 896 897 898 899 900 901 ...\n"," $ Pclass     : num [1:418] 3 3 2 3 3 3 3 2 3 3 ...\n"," $ Name       : chr [1:418] \"Kelly, Mr. James\" \"Wilkes, Mrs. James (Ellen Needs)\" \"Myles, Mr. Thomas Francis\" \"Wirz, Mr. Albert\" ...\n"," $ Sex        : chr [1:418] \"male\" \"female\" \"male\" \"male\" ...\n"," $ Age        : num [1:418] 34.5 47 62 27 22 14 30 26 18 21 ...\n"," $ SibSp      : num [1:418] 0 1 0 0 1 0 0 1 0 2 ...\n"," $ Parch      : num [1:418] 0 0 0 0 1 0 0 1 0 0 ...\n"," $ Ticket     : chr [1:418] \"330911\" \"363272\" \"240276\" \"315154\" ...\n"," $ Fare       : num [1:418] 7.83 7 9.69 8.66 12.29 ...\n"," $ Cabin      : chr [1:418] NA NA NA NA ...\n"," $ Embarked   : chr [1:418] \"Q\" \"S\" \"Q\" \"S\" ...\n"," - attr(*, \"spec\")=\n","  .. cols(\n","  ..   PassengerId = \u001b[32mcol_double()\u001b[39m,\n","  ..   Pclass = \u001b[32mcol_double()\u001b[39m,\n","  ..   Name = \u001b[31mcol_character()\u001b[39m,\n","  ..   Sex = \u001b[31mcol_character()\u001b[39m,\n","  ..   Age = \u001b[32mcol_double()\u001b[39m,\n","  ..   SibSp = \u001b[32mcol_double()\u001b[39m,\n","  ..   Parch = \u001b[32mcol_double()\u001b[39m,\n","  ..   Ticket = \u001b[31mcol_character()\u001b[39m,\n","  ..   Fare = \u001b[32mcol_double()\u001b[39m,\n","  ..   Cabin = \u001b[31mcol_character()\u001b[39m,\n","  ..   Embarked = \u001b[31mcol_character()\u001b[39m\n","  .. )\n"," - attr(*, \"problems\")=<externalptr> \n"]}],"source":["library(tidyverse)\n","\n","titanic_train <- read_csv(\"../input/titanic/train.csv\")\n","str(titanic_train)\n","summary(titanic_train)\n","head(titanic_train)\n","tail(titanic_train)\n","\n","titanic_test <- read_csv(\"../input/titanic/test.csv\")\n","str(titanic_test)"]},{"cell_type":"markdown","id":"419597e6","metadata":{"_cell_guid":"160c826b-accf-4610-88ec-f41b867646b7","_uuid":"2fab43d0-2b6c-4553-84bd-13bbaa8e9615","papermill":{"duration":0.108788,"end_time":"2022-04-01T13:50:51.121622","exception":false,"start_time":"2022-04-01T13:50:51.012834","status":"completed"},"tags":[]},"source":["2. Prepare and join the data"]},{"cell_type":"code","execution_count":2,"id":"5849e803","metadata":{"_cell_guid":"cb3d1d0f-68a7-458b-86f8-f22820e2d79c","_uuid":"af1715b7-01bb-474d-b1df-39e4c7f249ca","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:51.368879Z","iopub.status.busy":"2022-04-01T13:50:51.342117Z","iopub.status.idle":"2022-04-01T13:50:51.472616Z","shell.execute_reply":"2022-04-01T13:50:51.471196Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.242187,"end_time":"2022-04-01T13:50:51.472736","exception":false,"start_time":"2022-04-01T13:50:51.230549","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 6 × 12</caption>\n","<thead>\n","\t<tr><th scope=col>PassengerId</th><th scope=col>Pclass</th><th scope=col>Name</th><th scope=col>Sex</th><th scope=col>Age</th><th scope=col>SibSp</th><th scope=col>Parch</th><th scope=col>Ticket</th><th scope=col>Fare</th><th scope=col>Cabin</th><th scope=col>Embarked</th><th scope=col>is_train_set</th></tr>\n","\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;lgl&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1304</td><td>3</td><td>Henriksson, Miss. Jenny Lovisa</td><td>female</td><td>28.0</td><td>0</td><td>0</td><td>347086            </td><td>  7.7750</td><td>NA  </td><td>S</td><td>FALSE</td></tr>\n","\t<tr><td>1305</td><td>3</td><td>Spector, Mr. Woolf            </td><td>male  </td><td>  NA</td><td>0</td><td>0</td><td>A.5. 3236         </td><td>  8.0500</td><td>NA  </td><td>S</td><td>FALSE</td></tr>\n","\t<tr><td>1306</td><td>1</td><td>Oliva y Ocana, Dona. Fermina  </td><td>female</td><td>39.0</td><td>0</td><td>0</td><td>PC 17758          </td><td>108.9000</td><td>C105</td><td>C</td><td>FALSE</td></tr>\n","\t<tr><td>1307</td><td>3</td><td>Saether, Mr. Simon Sivertsen  </td><td>male  </td><td>38.5</td><td>0</td><td>0</td><td>SOTON/O.Q. 3101262</td><td>  7.2500</td><td>NA  </td><td>S</td><td>FALSE</td></tr>\n","\t<tr><td>1308</td><td>3</td><td>Ware, Mr. Frederick           </td><td>male  </td><td>  NA</td><td>0</td><td>0</td><td>359309            </td><td>  8.0500</td><td>NA  </td><td>S</td><td>FALSE</td></tr>\n","\t<tr><td>1309</td><td>3</td><td>Peter, Master. Michael J      </td><td>male  </td><td>  NA</td><td>1</td><td>1</td><td>2668              </td><td> 22.3583</td><td>NA  </td><td>C</td><td>FALSE</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 6 × 12\n","\\begin{tabular}{llllllllllll}\n"," PassengerId & Pclass & Name & Sex & Age & SibSp & Parch & Ticket & Fare & Cabin & Embarked & is\\_train\\_set\\\\\n"," <dbl> & <dbl> & <chr> & <chr> & <dbl> & <dbl> & <dbl> & <chr> & <dbl> & <chr> & <chr> & <lgl>\\\\\n","\\hline\n","\t 1304 & 3 & Henriksson, Miss. Jenny Lovisa & female & 28.0 & 0 & 0 & 347086             &   7.7750 & NA   & S & FALSE\\\\\n","\t 1305 & 3 & Spector, Mr. Woolf             & male   &   NA & 0 & 0 & A.5. 3236          &   8.0500 & NA   & S & FALSE\\\\\n","\t 1306 & 1 & Oliva y Ocana, Dona. Fermina   & female & 39.0 & 0 & 0 & PC 17758           & 108.9000 & C105 & C & FALSE\\\\\n","\t 1307 & 3 & Saether, Mr. Simon Sivertsen   & male   & 38.5 & 0 & 0 & SOTON/O.Q. 3101262 &   7.2500 & NA   & S & FALSE\\\\\n","\t 1308 & 3 & Ware, Mr. Frederick            & male   &   NA & 0 & 0 & 359309             &   8.0500 & NA   & S & FALSE\\\\\n","\t 1309 & 3 & Peter, Master. Michael J       & male   &   NA & 1 & 1 & 2668               &  22.3583 & NA   & C & FALSE\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 6 × 12\n","\n","| PassengerId &lt;dbl&gt; | Pclass &lt;dbl&gt; | Name &lt;chr&gt; | Sex &lt;chr&gt; | Age &lt;dbl&gt; | SibSp &lt;dbl&gt; | Parch &lt;dbl&gt; | Ticket &lt;chr&gt; | Fare &lt;dbl&gt; | Cabin &lt;chr&gt; | Embarked &lt;chr&gt; | is_train_set &lt;lgl&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|---|\n","| 1304 | 3 | Henriksson, Miss. Jenny Lovisa | female | 28.0 | 0 | 0 | 347086             |   7.7750 | NA   | S | FALSE |\n","| 1305 | 3 | Spector, Mr. Woolf             | male   |   NA | 0 | 0 | A.5. 3236          |   8.0500 | NA   | S | FALSE |\n","| 1306 | 1 | Oliva y Ocana, Dona. Fermina   | female | 39.0 | 0 | 0 | PC 17758           | 108.9000 | C105 | C | FALSE |\n","| 1307 | 3 | Saether, Mr. Simon Sivertsen   | male   | 38.5 | 0 | 0 | SOTON/O.Q. 3101262 |   7.2500 | NA   | S | FALSE |\n","| 1308 | 3 | Ware, Mr. Frederick            | male   |   NA | 0 | 0 | 359309             |   8.0500 | NA   | S | FALSE |\n","| 1309 | 3 | Peter, Master. Michael J       | male   |   NA | 1 | 1 | 2668               |  22.3583 | NA   | C | FALSE |\n","\n"],"text/plain":["  PassengerId Pclass Name                           Sex    Age  SibSp Parch\n","1 1304        3      Henriksson, Miss. Jenny Lovisa female 28.0 0     0    \n","2 1305        3      Spector, Mr. Woolf             male     NA 0     0    \n","3 1306        1      Oliva y Ocana, Dona. Fermina   female 39.0 0     0    \n","4 1307        3      Saether, Mr. Simon Sivertsen   male   38.5 0     0    \n","5 1308        3      Ware, Mr. Frederick            male     NA 0     0    \n","6 1309        3      Peter, Master. Michael J       male     NA 1     1    \n","  Ticket             Fare     Cabin Embarked is_train_set\n","1 347086               7.7750 NA    S        FALSE       \n","2 A.5. 3236            8.0500 NA    S        FALSE       \n","3 PC 17758           108.9000 C105  C        FALSE       \n","4 SOTON/O.Q. 3101262   7.2500 NA    S        FALSE       \n","5 359309               8.0500 NA    S        FALSE       \n","6 2668                22.3583 NA    C        FALSE       "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 6 × 13</caption>\n","<thead>\n","\t<tr><th scope=col>PassengerId</th><th scope=col>Survived</th><th scope=col>Pclass</th><th scope=col>Name</th><th scope=col>Sex</th><th scope=col>Age</th><th scope=col>SibSp</th><th scope=col>Parch</th><th scope=col>Ticket</th><th scope=col>Fare</th><th scope=col>Cabin</th><th scope=col>Embarked</th><th scope=col>is_train_set</th></tr>\n","\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;lgl&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>886</td><td>0</td><td>3</td><td>Rice, Mrs. William (Margaret Norton)    </td><td>female</td><td>39</td><td>0</td><td>5</td><td>382652    </td><td>29.125</td><td>NA  </td><td>Q</td><td>TRUE</td></tr>\n","\t<tr><td>887</td><td>0</td><td>2</td><td>Montvila, Rev. Juozas                   </td><td>male  </td><td>27</td><td>0</td><td>0</td><td>211536    </td><td>13.000</td><td>NA  </td><td>S</td><td>TRUE</td></tr>\n","\t<tr><td>888</td><td>1</td><td>1</td><td>Graham, Miss. Margaret Edith            </td><td>female</td><td>19</td><td>0</td><td>0</td><td>112053    </td><td>30.000</td><td>B42 </td><td>S</td><td>TRUE</td></tr>\n","\t<tr><td>889</td><td>0</td><td>3</td><td>Johnston, Miss. Catherine Helen \"Carrie\"</td><td>female</td><td>NA</td><td>1</td><td>2</td><td>W./C. 6607</td><td>23.450</td><td>NA  </td><td>S</td><td>TRUE</td></tr>\n","\t<tr><td>890</td><td>1</td><td>1</td><td>Behr, Mr. Karl Howell                   </td><td>male  </td><td>26</td><td>0</td><td>0</td><td>111369    </td><td>30.000</td><td>C148</td><td>C</td><td>TRUE</td></tr>\n","\t<tr><td>891</td><td>0</td><td>3</td><td>Dooley, Mr. Patrick                     </td><td>male  </td><td>32</td><td>0</td><td>0</td><td>370376    </td><td> 7.750</td><td>NA  </td><td>Q</td><td>TRUE</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 6 × 13\n","\\begin{tabular}{lllllllllllll}\n"," PassengerId & Survived & Pclass & Name & Sex & Age & SibSp & Parch & Ticket & Fare & Cabin & Embarked & is\\_train\\_set\\\\\n"," <dbl> & <dbl> & <dbl> & <chr> & <chr> & <dbl> & <dbl> & <dbl> & <chr> & <dbl> & <chr> & <chr> & <lgl>\\\\\n","\\hline\n","\t 886 & 0 & 3 & Rice, Mrs. William (Margaret Norton)     & female & 39 & 0 & 5 & 382652     & 29.125 & NA   & Q & TRUE\\\\\n","\t 887 & 0 & 2 & Montvila, Rev. Juozas                    & male   & 27 & 0 & 0 & 211536     & 13.000 & NA   & S & TRUE\\\\\n","\t 888 & 1 & 1 & Graham, Miss. Margaret Edith             & female & 19 & 0 & 0 & 112053     & 30.000 & B42  & S & TRUE\\\\\n","\t 889 & 0 & 3 & Johnston, Miss. Catherine Helen \"Carrie\" & female & NA & 1 & 2 & W./C. 6607 & 23.450 & NA   & S & TRUE\\\\\n","\t 890 & 1 & 1 & Behr, Mr. Karl Howell                    & male   & 26 & 0 & 0 & 111369     & 30.000 & C148 & C & TRUE\\\\\n","\t 891 & 0 & 3 & Dooley, Mr. Patrick                      & male   & 32 & 0 & 0 & 370376     &  7.750 & NA   & Q & TRUE\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 6 × 13\n","\n","| PassengerId &lt;dbl&gt; | Survived &lt;dbl&gt; | Pclass &lt;dbl&gt; | Name &lt;chr&gt; | Sex &lt;chr&gt; | Age &lt;dbl&gt; | SibSp &lt;dbl&gt; | Parch &lt;dbl&gt; | Ticket &lt;chr&gt; | Fare &lt;dbl&gt; | Cabin &lt;chr&gt; | Embarked &lt;chr&gt; | is_train_set &lt;lgl&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|---|---|\n","| 886 | 0 | 3 | Rice, Mrs. William (Margaret Norton)     | female | 39 | 0 | 5 | 382652     | 29.125 | NA   | Q | TRUE |\n","| 887 | 0 | 2 | Montvila, Rev. Juozas                    | male   | 27 | 0 | 0 | 211536     | 13.000 | NA   | S | TRUE |\n","| 888 | 1 | 1 | Graham, Miss. Margaret Edith             | female | 19 | 0 | 0 | 112053     | 30.000 | B42  | S | TRUE |\n","| 889 | 0 | 3 | Johnston, Miss. Catherine Helen \"Carrie\" | female | NA | 1 | 2 | W./C. 6607 | 23.450 | NA   | S | TRUE |\n","| 890 | 1 | 1 | Behr, Mr. Karl Howell                    | male   | 26 | 0 | 0 | 111369     | 30.000 | C148 | C | TRUE |\n","| 891 | 0 | 3 | Dooley, Mr. Patrick                      | male   | 32 | 0 | 0 | 370376     |  7.750 | NA   | Q | TRUE |\n","\n"],"text/plain":["  PassengerId Survived Pclass Name                                     Sex   \n","1 886         0        3      Rice, Mrs. William (Margaret Norton)     female\n","2 887         0        2      Montvila, Rev. Juozas                    male  \n","3 888         1        1      Graham, Miss. Margaret Edith             female\n","4 889         0        3      Johnston, Miss. Catherine Helen \"Carrie\" female\n","5 890         1        1      Behr, Mr. Karl Howell                    male  \n","6 891         0        3      Dooley, Mr. Patrick                      male  \n","  Age SibSp Parch Ticket     Fare   Cabin Embarked is_train_set\n","1 39  0     5     382652     29.125 NA    Q        TRUE        \n","2 27  0     0     211536     13.000 NA    S        TRUE        \n","3 19  0     0     112053     30.000 B42   S        TRUE        \n","4 NA  1     2     W./C. 6607 23.450 NA    S        TRUE        \n","5 26  0     0     111369     30.000 C148  C        TRUE        \n","6 32  0     0     370376      7.750 NA    Q        TRUE        "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["12"],"text/latex":["12"],"text/markdown":["12"],"text/plain":["[1] 12"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["13"],"text/latex":["13"],"text/markdown":["13"],"text/plain":["[1] 13"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'PassengerId'</li><li>'Survived'</li><li>'Pclass'</li><li>'Name'</li><li>'Sex'</li><li>'Age'</li><li>'SibSp'</li><li>'Parch'</li><li>'Ticket'</li><li>'Fare'</li><li>'Cabin'</li><li>'Embarked'</li><li>'is_train_set'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'PassengerId'\n","\\item 'Survived'\n","\\item 'Pclass'\n","\\item 'Name'\n","\\item 'Sex'\n","\\item 'Age'\n","\\item 'SibSp'\n","\\item 'Parch'\n","\\item 'Ticket'\n","\\item 'Fare'\n","\\item 'Cabin'\n","\\item 'Embarked'\n","\\item 'is\\_train\\_set'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'PassengerId'\n","2. 'Survived'\n","3. 'Pclass'\n","4. 'Name'\n","5. 'Sex'\n","6. 'Age'\n","7. 'SibSp'\n","8. 'Parch'\n","9. 'Ticket'\n","10. 'Fare'\n","11. 'Cabin'\n","12. 'Embarked'\n","13. 'is_train_set'\n","\n","\n"],"text/plain":[" [1] \"PassengerId\"  \"Survived\"     \"Pclass\"       \"Name\"         \"Sex\"         \n"," [6] \"Age\"          \"SibSp\"        \"Parch\"        \"Ticket\"       \"Fare\"        \n","[11] \"Cabin\"        \"Embarked\"     \"is_train_set\""]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'PassengerId'</li><li>'Pclass'</li><li>'Name'</li><li>'Sex'</li><li>'Age'</li><li>'SibSp'</li><li>'Parch'</li><li>'Ticket'</li><li>'Fare'</li><li>'Cabin'</li><li>'Embarked'</li><li>'is_train_set'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'PassengerId'\n","\\item 'Pclass'\n","\\item 'Name'\n","\\item 'Sex'\n","\\item 'Age'\n","\\item 'SibSp'\n","\\item 'Parch'\n","\\item 'Ticket'\n","\\item 'Fare'\n","\\item 'Cabin'\n","\\item 'Embarked'\n","\\item 'is\\_train\\_set'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'PassengerId'\n","2. 'Pclass'\n","3. 'Name'\n","4. 'Sex'\n","5. 'Age'\n","6. 'SibSp'\n","7. 'Parch'\n","8. 'Ticket'\n","9. 'Fare'\n","10. 'Cabin'\n","11. 'Embarked'\n","12. 'is_train_set'\n","\n","\n"],"text/plain":[" [1] \"PassengerId\"  \"Pclass\"       \"Name\"         \"Sex\"          \"Age\"         \n"," [6] \"SibSp\"        \"Parch\"        \"Ticket\"       \"Fare\"         \"Cabin\"       \n","[11] \"Embarked\"     \"is_train_set\""]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["418"],"text/latex":["418"],"text/markdown":["418"],"text/plain":["[1] 418"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["1309"],"text/latex":["1309"],"text/markdown":["1309"],"text/plain":["[1] 1309"]},"metadata":{},"output_type":"display_data"}],"source":["# mark them before combining\n","\n","titanic_train$is_train_set <- TRUE\n","titanic_test$is_train_set <- FALSE\n","\n","tail(titanic_test)\n","tail(titanic_train)\n","\n","# make sure they're equal\n","\n","ncol(titanic_test)\n","ncol(titanic_train)\n","names(titanic_train)\n","names(titanic_test)\n","\n","# THERE'S NO 'SURVIVED' COLUMN IN TEST SET, SO LET'S CREATE IT\n","titanic_test$Survived <- NA\n","\n","sum(is.na(titanic_test$Survived)) # this 418 NA will show up in the whole data\n","\n","\n","# BIND THE TWO DATASET\n","titanic_full <- rbind(titanic_train, titanic_test)\n","\n","#check \n","418 + 891"]},{"cell_type":"markdown","id":"58063212","metadata":{"_cell_guid":"0a394720-b94f-4b8b-b6fa-df0dabe4674a","_uuid":"1aca45a2-d7ef-4f7b-8b9a-eef5347a457f","papermill":{"duration":0.126647,"end_time":"2022-04-01T13:50:51.726979","exception":false,"start_time":"2022-04-01T13:50:51.600332","status":"completed"},"tags":[]},"source":["3. Check joined data"]},{"cell_type":"code","execution_count":3,"id":"d056ab72","metadata":{"_cell_guid":"b7c4f4a6-be38-48dd-b053-a053cea25c5d","_uuid":"66baf054-6b76-4977-ae77-99ba07dec3fa","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:51.987783Z","iopub.status.busy":"2022-04-01T13:50:51.985866Z","iopub.status.idle":"2022-04-01T13:50:52.015857Z","shell.execute_reply":"2022-04-01T13:50:52.014488Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.162213,"end_time":"2022-04-01T13:50:52.015967","exception":false,"start_time":"2022-04-01T13:50:51.853754","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Survived</dt><dd>418</dd><dt>Pclass</dt><dd>0</dd><dt>Name</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>Age</dt><dd>263</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Ticket</dt><dd>0</dd><dt>Fare</dt><dd>1</dd><dt>Cabin</dt><dd>1014</dd><dt>Embarked</dt><dd>2</dd><dt>is_train_set</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Survived] 418\n","\\item[Pclass] 0\n","\\item[Name] 0\n","\\item[Sex] 0\n","\\item[Age] 263\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Ticket] 0\n","\\item[Fare] 1\n","\\item[Cabin] 1014\n","\\item[Embarked] 2\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Survived\n",":   418Pclass\n",":   0Name\n",":   0Sex\n",":   0Age\n",":   263SibSp\n",":   0Parch\n",":   0Ticket\n",":   0Fare\n",":   1Cabin\n",":   1014Embarked\n",":   2is_train_set\n",":   0\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","           0          418            0            0            0          263 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","           0            0            0            1         1014            2 \n","is_train_set \n","           0 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/plain":["\n","   0    1 <NA> \n"," 549  342  418 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["418"],"text/latex":["418"],"text/markdown":["418"],"text/plain":["[1] 418"]},"metadata":{},"output_type":"display_data"}],"source":["# check missing data\n","colSums(is.na(titanic_full))\n","\n","# there's missing values in 'Survived', 'Age', 'Fare', 'Cabin', and 'Embarked'\n","table(titanic_full$Survived, useNA = \"always\")\n","\n","# check whether the 418 NA is from the titanic_test source\n","sum(is.na(subset(titanic_full, is_train_set==FALSE, select=\"Survived\"))) #yes 418"]},{"cell_type":"markdown","id":"7f08d80a","metadata":{"_cell_guid":"dab7c18c-0b81-4f3e-8547-6bf1e140e3d3","_uuid":"a37ce2de-b79b-4c04-9dc5-87fe488e1819","papermill":{"duration":0.132689,"end_time":"2022-04-01T13:50:52.281956","exception":false,"start_time":"2022-04-01T13:50:52.149267","status":"completed"},"tags":[]},"source":["<a id=\"subone-2\"></a>\n","### Fare Imputation"]},{"cell_type":"markdown","id":"d10b57e0","metadata":{"_cell_guid":"0109e5ba-1bc4-4eb9-ab78-f76782d649c0","_uuid":"6eb814f6-cc79-4525-8ea0-5ddc07a3b01d","papermill":{"duration":0.131621,"end_time":"2022-04-01T13:50:52.547239","exception":false,"start_time":"2022-04-01T13:50:52.415618","status":"completed"},"tags":[]},"source":["1. Prepare"]},{"cell_type":"code","execution_count":4,"id":"5ff22f3b","metadata":{"_cell_guid":"ab0ed02c-f85a-49df-97f3-12c09cc708bb","_uuid":"588a689e-4b29-4838-9281-98f9d5062096","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:52.817774Z","iopub.status.busy":"2022-04-01T13:50:52.815684Z","iopub.status.idle":"2022-04-01T13:50:53.086586Z","shell.execute_reply":"2022-04-01T13:50:53.085149Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.407264,"end_time":"2022-04-01T13:50:53.086709","exception":false,"start_time":"2022-04-01T13:50:52.679445","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["1"],"text/latex":["1"],"text/markdown":["1"],"text/plain":["[1] 1"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<dl>\n","\t<dt>$stats</dt>\n","\t\t<dd><style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>0</li><li>7.8958</li><li>14.4542</li><li>31.275</li><li>65</li></ol>\n","</dd>\n","\t<dt>$n</dt>\n","\t\t<dd>1308</dd>\n","\t<dt>$conf</dt>\n","\t\t<dd><style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>13.4328305557682</li><li>15.4755694442318</li></ol>\n","</dd>\n","\t<dt>$out</dt>\n","\t\t<dd><style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>71.2833</li><li>263</li><li>146.5208</li><li>82.1708</li><li>76.7292</li><li>80</li><li>83.475</li><li>73.5</li><li>263</li><li>77.2875</li><li>247.5208</li><li>73.5</li><li>77.2875</li><li>79.2</li><li>66.6</li><li>69.55</li><li>69.55</li><li>146.5208</li><li>69.55</li><li>113.275</li><li>76.2917</li><li>90</li><li>83.475</li><li>90</li><li>79.2</li><li>86.5</li><li>512.3292</li><li>79.65</li><li>153.4625</li><li>135.6333</li><li>77.9583</li><li>78.85</li><li>91.0792</li><li>151.55</li><li>247.5208</li><li>151.55</li><li>110.8833</li><li>108.9</li><li>83.1583</li><li>262.375</li><li>164.8667</li><li>134.5</li><li>69.55</li><li>135.6333</li><li>153.4625</li><li>133.65</li><li>66.6</li><li>134.5</li><li>263</li><li>75.25</li><li>69.3</li><li>135.6333</li><li>82.1708</li><li>211.5</li><li>227.525</li><li>73.5</li><li>120</li><li>113.275</li><li>90</li><li>120</li><li>263</li><li>81.8583</li><li>89.1042</li><li>91.0792</li><li>90</li><li>78.2667</li><li>151.55</li><li>86.5</li><li>108.9</li><li>93.5</li><li>221.7792</li><li>106.425</li><li>71</li><li>106.425</li><li>110.8833</li><li>227.525</li><li>79.65</li><li>110.8833</li><li>79.65</li><li>79.2</li><li>78.2667</li><li>153.4625</li><li>77.9583</li><li>69.3</li><li>76.7292</li><li>73.5</li><li>113.275</li><li>133.65</li><li>73.5</li><li>512.3292</li><li>76.7292</li><li>211.3375</li><li>110.8833</li><li>227.525</li><li>151.55</li><li>227.525</li><li>211.3375</li><li>512.3292</li><li>78.85</li><li>262.375</li><li>71</li><li>86.5</li><li>120</li><li>77.9583</li><li>211.3375</li><li>79.2</li><li>69.55</li><li>120</li><li>93.5</li><li>80</li><li>83.1583</li><li>69.55</li><li>89.1042</li><li>164.8667</li><li>69.55</li><li>83.1583</li><li>82.2667</li><li>262.375</li><li>76.2917</li><li>263</li><li>262.375</li><li>262.375</li><li>263</li><li>211.5</li><li>211.5</li><li>221.7792</li><li>78.85</li><li>221.7792</li><li>75.2417</li><li>151.55</li><li>262.375</li><li>83.1583</li><li>221.7792</li><li>83.1583</li><li>83.1583</li><li>247.5208</li><li>69.55</li><li>134.5</li><li>227.525</li><li>73.5</li><li>164.8667</li><li>211.5</li><li>71.2833</li><li>75.25</li><li>106.425</li><li>134.5</li><li>136.7792</li><li>75.2417</li><li>136.7792</li><li>82.2667</li><li>81.8583</li><li>151.55</li><li>93.5</li><li>135.6333</li><li>146.5208</li><li>211.3375</li><li>79.2</li><li>69.55</li><li>512.3292</li><li>73.5</li><li>69.55</li><li>69.55</li><li>134.5</li><li>81.8583</li><li>262.375</li><li>93.5</li><li>79.2</li><li>164.8667</li><li>211.5</li><li>90</li><li>108.9</li></ol>\n","</dd>\n","</dl>\n"],"text/latex":["\\begin{description}\n","\\item[\\$stats] \\begin{enumerate*}\n","\\item 0\n","\\item 7.8958\n","\\item 14.4542\n","\\item 31.275\n","\\item 65\n","\\end{enumerate*}\n","\n","\\item[\\$n] 1308\n","\\item[\\$conf] \\begin{enumerate*}\n","\\item 13.4328305557682\n","\\item 15.4755694442318\n","\\end{enumerate*}\n","\n","\\item[\\$out] \\begin{enumerate*}\n","\\item 71.2833\n","\\item 263\n","\\item 146.5208\n","\\item 82.1708\n","\\item 76.7292\n","\\item 80\n","\\item 83.475\n","\\item 73.5\n","\\item 263\n","\\item 77.2875\n","\\item 247.5208\n","\\item 73.5\n","\\item 77.2875\n","\\item 79.2\n","\\item 66.6\n","\\item 69.55\n","\\item 69.55\n","\\item 146.5208\n","\\item 69.55\n","\\item 113.275\n","\\item 76.2917\n","\\item 90\n","\\item 83.475\n","\\item 90\n","\\item 79.2\n","\\item 86.5\n","\\item 512.3292\n","\\item 79.65\n","\\item 153.4625\n","\\item 135.6333\n","\\item 77.9583\n","\\item 78.85\n","\\item 91.0792\n","\\item 151.55\n","\\item 247.5208\n","\\item 151.55\n","\\item 110.8833\n","\\item 108.9\n","\\item 83.1583\n","\\item 262.375\n","\\item 164.8667\n","\\item 134.5\n","\\item 69.55\n","\\item 135.6333\n","\\item 153.4625\n","\\item 133.65\n","\\item 66.6\n","\\item 134.5\n","\\item 263\n","\\item 75.25\n","\\item 69.3\n","\\item 135.6333\n","\\item 82.1708\n","\\item 211.5\n","\\item 227.525\n","\\item 73.5\n","\\item 120\n","\\item 113.275\n","\\item 90\n","\\item 120\n","\\item 263\n","\\item 81.8583\n","\\item 89.1042\n","\\item 91.0792\n","\\item 90\n","\\item 78.2667\n","\\item 151.55\n","\\item 86.5\n","\\item 108.9\n","\\item 93.5\n","\\item 221.7792\n","\\item 106.425\n","\\item 71\n","\\item 106.425\n","\\item 110.8833\n","\\item 227.525\n","\\item 79.65\n","\\item 110.8833\n","\\item 79.65\n","\\item 79.2\n","\\item 78.2667\n","\\item 153.4625\n","\\item 77.9583\n","\\item 69.3\n","\\item 76.7292\n","\\item 73.5\n","\\item 113.275\n","\\item 133.65\n","\\item 73.5\n","\\item 512.3292\n","\\item 76.7292\n","\\item 211.3375\n","\\item 110.8833\n","\\item 227.525\n","\\item 151.55\n","\\item 227.525\n","\\item 211.3375\n","\\item 512.3292\n","\\item 78.85\n","\\item 262.375\n","\\item 71\n","\\item 86.5\n","\\item 120\n","\\item 77.9583\n","\\item 211.3375\n","\\item 79.2\n","\\item 69.55\n","\\item 120\n","\\item 93.5\n","\\item 80\n","\\item 83.1583\n","\\item 69.55\n","\\item 89.1042\n","\\item 164.8667\n","\\item 69.55\n","\\item 83.1583\n","\\item 82.2667\n","\\item 262.375\n","\\item 76.2917\n","\\item 263\n","\\item 262.375\n","\\item 262.375\n","\\item 263\n","\\item 211.5\n","\\item 211.5\n","\\item 221.7792\n","\\item 78.85\n","\\item 221.7792\n","\\item 75.2417\n","\\item 151.55\n","\\item 262.375\n","\\item 83.1583\n","\\item 221.7792\n","\\item 83.1583\n","\\item 83.1583\n","\\item 247.5208\n","\\item 69.55\n","\\item 134.5\n","\\item 227.525\n","\\item 73.5\n","\\item 164.8667\n","\\item 211.5\n","\\item 71.2833\n","\\item 75.25\n","\\item 106.425\n","\\item 134.5\n","\\item 136.7792\n","\\item 75.2417\n","\\item 136.7792\n","\\item 82.2667\n","\\item 81.8583\n","\\item 151.55\n","\\item 93.5\n","\\item 135.6333\n","\\item 146.5208\n","\\item 211.3375\n","\\item 79.2\n","\\item 69.55\n","\\item 512.3292\n","\\item 73.5\n","\\item 69.55\n","\\item 69.55\n","\\item 134.5\n","\\item 81.8583\n","\\item 262.375\n","\\item 93.5\n","\\item 79.2\n","\\item 164.8667\n","\\item 211.5\n","\\item 90\n","\\item 108.9\n","\\end{enumerate*}\n","\n","\\end{description}\n"],"text/markdown":["$stats\n",":   1. 0\n","2. 7.8958\n","3. 14.4542\n","4. 31.275\n","5. 65\n","\n","\n","\n","$n\n",":   1308\n","$conf\n",":   1. 13.4328305557682\n","2. 15.4755694442318\n","\n","\n","\n","$out\n",":   1. 71.2833\n","2. 263\n","3. 146.5208\n","4. 82.1708\n","5. 76.7292\n","6. 80\n","7. 83.475\n","8. 73.5\n","9. 263\n","10. 77.2875\n","11. 247.5208\n","12. 73.5\n","13. 77.2875\n","14. 79.2\n","15. 66.6\n","16. 69.55\n","17. 69.55\n","18. 146.5208\n","19. 69.55\n","20. 113.275\n","21. 76.2917\n","22. 90\n","23. 83.475\n","24. 90\n","25. 79.2\n","26. 86.5\n","27. 512.3292\n","28. 79.65\n","29. 153.4625\n","30. 135.6333\n","31. 77.9583\n","32. 78.85\n","33. 91.0792\n","34. 151.55\n","35. 247.5208\n","36. 151.55\n","37. 110.8833\n","38. 108.9\n","39. 83.1583\n","40. 262.375\n","41. 164.8667\n","42. 134.5\n","43. 69.55\n","44. 135.6333\n","45. 153.4625\n","46. 133.65\n","47. 66.6\n","48. 134.5\n","49. 263\n","50. 75.25\n","51. 69.3\n","52. 135.6333\n","53. 82.1708\n","54. 211.5\n","55. 227.525\n","56. 73.5\n","57. 120\n","58. 113.275\n","59. 90\n","60. 120\n","61. 263\n","62. 81.8583\n","63. 89.1042\n","64. 91.0792\n","65. 90\n","66. 78.2667\n","67. 151.55\n","68. 86.5\n","69. 108.9\n","70. 93.5\n","71. 221.7792\n","72. 106.425\n","73. 71\n","74. 106.425\n","75. 110.8833\n","76. 227.525\n","77. 79.65\n","78. 110.8833\n","79. 79.65\n","80. 79.2\n","81. 78.2667\n","82. 153.4625\n","83. 77.9583\n","84. 69.3\n","85. 76.7292\n","86. 73.5\n","87. 113.275\n","88. 133.65\n","89. 73.5\n","90. 512.3292\n","91. 76.7292\n","92. 211.3375\n","93. 110.8833\n","94. 227.525\n","95. 151.55\n","96. 227.525\n","97. 211.3375\n","98. 512.3292\n","99. 78.85\n","100. 262.375\n","101. 71\n","102. 86.5\n","103. 120\n","104. 77.9583\n","105. 211.3375\n","106. 79.2\n","107. 69.55\n","108. 120\n","109. 93.5\n","110. 80\n","111. 83.1583\n","112. 69.55\n","113. 89.1042\n","114. 164.8667\n","115. 69.55\n","116. 83.1583\n","117. 82.2667\n","118. 262.375\n","119. 76.2917\n","120. 263\n","121. 262.375\n","122. 262.375\n","123. 263\n","124. 211.5\n","125. 211.5\n","126. 221.7792\n","127. 78.85\n","128. 221.7792\n","129. 75.2417\n","130. 151.55\n","131. 262.375\n","132. 83.1583\n","133. 221.7792\n","134. 83.1583\n","135. 83.1583\n","136. 247.5208\n","137. 69.55\n","138. 134.5\n","139. 227.525\n","140. 73.5\n","141. 164.8667\n","142. 211.5\n","143. 71.2833\n","144. 75.25\n","145. 106.425\n","146. 134.5\n","147. 136.7792\n","148. 75.2417\n","149. 136.7792\n","150. 82.2667\n","151. 81.8583\n","152. 151.55\n","153. 93.5\n","154. 135.6333\n","155. 146.5208\n","156. 211.3375\n","157. 79.2\n","158. 69.55\n","159. 512.3292\n","160. 73.5\n","161. 69.55\n","162. 69.55\n","163. 134.5\n","164. 81.8583\n","165. 262.375\n","166. 93.5\n","167. 79.2\n","168. 164.8667\n","169. 211.5\n","170. 90\n","171. 108.9\n","\n","\n","\n","\n","\n"],"text/plain":["$stats\n","[1]  0.0000  7.8958 14.4542 31.2750 65.0000\n","\n","$n\n","[1] 1308\n","\n","$conf\n","[1] 13.43283 15.47557\n","\n","$out\n","  [1]  71.2833 263.0000 146.5208  82.1708  76.7292  80.0000  83.4750  73.5000\n","  [9] 263.0000  77.2875 247.5208  73.5000  77.2875  79.2000  66.6000  69.5500\n"," [17]  69.5500 146.5208  69.5500 113.2750  76.2917  90.0000  83.4750  90.0000\n"," [25]  79.2000  86.5000 512.3292  79.6500 153.4625 135.6333  77.9583  78.8500\n"," [33]  91.0792 151.5500 247.5208 151.5500 110.8833 108.9000  83.1583 262.3750\n"," [41] 164.8667 134.5000  69.5500 135.6333 153.4625 133.6500  66.6000 134.5000\n"," [49] 263.0000  75.2500  69.3000 135.6333  82.1708 211.5000 227.5250  73.5000\n"," [57] 120.0000 113.2750  90.0000 120.0000 263.0000  81.8583  89.1042  91.0792\n"," [65]  90.0000  78.2667 151.5500  86.5000 108.9000  93.5000 221.7792 106.4250\n"," [73]  71.0000 106.4250 110.8833 227.5250  79.6500 110.8833  79.6500  79.2000\n"," [81]  78.2667 153.4625  77.9583  69.3000  76.7292  73.5000 113.2750 133.6500\n"," [89]  73.5000 512.3292  76.7292 211.3375 110.8833 227.5250 151.5500 227.5250\n"," [97] 211.3375 512.3292  78.8500 262.3750  71.0000  86.5000 120.0000  77.9583\n","[105] 211.3375  79.2000  69.5500 120.0000  93.5000  80.0000  83.1583  69.5500\n","[113]  89.1042 164.8667  69.5500  83.1583  82.2667 262.3750  76.2917 263.0000\n","[121] 262.3750 262.3750 263.0000 211.5000 211.5000 221.7792  78.8500 221.7792\n","[129]  75.2417 151.5500 262.3750  83.1583 221.7792  83.1583  83.1583 247.5208\n","[137]  69.5500 134.5000 227.5250  73.5000 164.8667 211.5000  71.2833  75.2500\n","[145] 106.4250 134.5000 136.7792  75.2417 136.7792  82.2667  81.8583 151.5500\n","[153]  93.5000 135.6333 146.5208 211.3375  79.2000  69.5500 512.3292  73.5000\n","[161]  69.5500  69.5500 134.5000  81.8583 262.3750  93.5000  79.2000 164.8667\n","[169] 211.5000  90.0000 108.9000\n"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>1</dd><dt>Survived</dt><dd>360</dd><dt>Pclass</dt><dd>1</dd><dt>Name</dt><dd>1</dd><dt>Sex</dt><dd>1</dd><dt>Age</dt><dd>246</dd><dt>SibSp</dt><dd>1</dd><dt>Parch</dt><dd>1</dd><dt>Ticket</dt><dd>1</dd><dt>Fare</dt><dd>1</dd><dt>Cabin</dt><dd>972</dd><dt>Embarked</dt><dd>1</dd><dt>is_train_set</dt><dd>1</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 1\n","\\item[Survived] 360\n","\\item[Pclass] 1\n","\\item[Name] 1\n","\\item[Sex] 1\n","\\item[Age] 246\n","\\item[SibSp] 1\n","\\item[Parch] 1\n","\\item[Ticket] 1\n","\\item[Fare] 1\n","\\item[Cabin] 972\n","\\item[Embarked] 1\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 1\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   1Survived\n",":   360Pclass\n",":   1Name\n",":   1Sex\n",":   1Age\n",":   246SibSp\n",":   1Parch\n",":   1Ticket\n",":   1Fare\n",":   1Cabin\n",":   972Embarked\n",":   1is_train_set\n",":   1\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","           1          360            1            1            1          246 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","           1            1            1            1          972            1 \n","is_train_set \n","           1 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0"],"text/latex":["0"],"text/markdown":["0"],"text/plain":["[1] 0"]},"metadata":{},"output_type":"display_data"},{"data":{"image/png":"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\nACAMhRR27z3242sfe7eJBZurZl577cevhR0AsK8ppLA7efazN0wef+W9/1XW8Zjv//jqz356\nu9hRo0ZV9J127/ePjWs8AIB4FVLYJUu6fvtnT59xxo1fPveaq6dMv3nWI18fcvDOC8o6nXjm\nmcPiGg8AIF6Fd/PEkf/r269VvXDe0RsuGva50y+5fX19Q9wTAQDkhcILuyiKSiuOvevJd/79\nh1997q5LD+lz+qN/XBf3RAAA8SvIsIuiKIqSI75515/+OO/zqd+P/6fPnPd/fxH3PAAAMSvc\nsIuiKGp/xMj/eP2dWyefPPOas+KeBQAgZoV088QeJYo6Xnz742eMePA3b3zUumefuMcBAIhN\nwYdd1iFDzpkyJO4hAABiVdhfxQIA0EjYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELY\nAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC\n2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAE\nQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEA\nBELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgB\nAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELY\nAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC\n2AEABELYAQAEQtgBAARC2AEABELYAQAEoijuAf6HPlqzasWKlR9s2Lxte01RWat2FV0P7d3n\n4G7t454LACA2BRZ2mfSmubdcd/u9s55b/sHuZ7v2HnD2pCnXTBnfvijR8rMBAMSrkMIuXbv6\n/OOPnrl0faq4Y/9TRh7V55BundqXlhbV79ixcd3aP61c9tziF26+7KwHZ/3m1SUPdi/xLTMA\nsG8ppLBb8q3hM5euH/iN22bfMLlnqz1M3lC7fvaNF02cNmvIxZOW3T2oxQcEAIhTIV3Wmjpz\nZetuX1v840v2WHVRFCVLKiZcM+eu/l3emXN1C88GABC7Qgq717bVtT5wxF6X9Tt5/7rty1pg\n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\nyE+FFHZLvjV85tL1A79x2+wbJvdstYfJG2rXz77xoonTZg25eNKyuwe1+IAAAHEqpLCbOnNl\n625fW/zjS3ItSJZUTLhmztbKp6fMuTq6+5nmfGY6na6srKypqWliTVVVVRRFnkoKf6Pm/HXL\nZ0uWLGn8s0CVlZWdccYZfiMIASuksHttW13r3iP2uqzfyfvX/WFZMz9z4cKFI0eObM7Kv/zl\nL838TGCPmv/XLZ/dcsstt9xyS9xT/M8tWLDgtNNOi3sK4B+lkMLuzIryOctvWFs7vGsTv59r\nqL5vblVZh9Ob+ZmDBw+eP39+05cQ/uM//uOBBx44++yz/6ppgV00569bPmtoaHjttdeOPPLI\nZLJQf8JbVlY2ePDguKcA/oEKKeyuunHYA+c91nfAuFuv/87o045rlfr0ra+ZHW88U3nztZfe\nW7X5jDumNfMzU6nUiBF7uQr4/vvvP/DAA8XFxf+zsYGs5vx1y3Pjx4+PewSAphRS2B167iP3\nvDj0whmPTRz+y1RJu4MPPaR75/alpcXp2h2b1q15d+U7G2rqE4nE4Ml3zr+oT9zDAgC0tEIK\nuyhKTrrjydMn/urO+2dXLnx++ZuvrFyWyZ5IJEt7HnLEkMHDzpp0yZnH94h3SgCAWBRW2EVR\nFPXoP2p6/1HToyhTX71x45Zt1bUl5fu1ad+h3EOJAYB9W+GFXaNEUXmHTuUd4h4DACBPFOq9\nXQAA7ELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAE\nQtgBAARC2AEABELYAQAEQtgBAASiKO4BCsaKFSvKysringIAiNmKFSviHiEnYbd3xcXFURRd\ncMEFcQ8CAOSLbB7kG2G3dxMmTKivr6+uro57EAAgL5SXl0+YMCHuKfYgkclk4p4BAIC/AzdP\nAAAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC\n2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAE\nQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEA\nBELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgB\nAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELY\nAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC\n2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAE\nQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEA\nBELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgB\nAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELY\nAQAEQtgBAARC2AEABELYAQAEQtgBAARC2AEABELYAf+v3TqQAQAAABjkb32PrygCYELsAAAm\nxA4AYELsAAAmxA4AYELsAAAmAjW5KTQF9xK8AAAAAElFTkSuQmCC"},"metadata":{"image/png":{"height":420,"width":420}},"output_type":"display_data"}],"source":["\n","\n","# we can impute missing data with predictive regression\n","# BUT regression with ordinary least square is susceptible to outliers\n","# there fore we need to cut off the outlier first\n","\n","# check NA in Fare\n","sum(is.na(titanic_full$Fare))\n","bp_Fare <- boxplot(titanic_full$Fare)\n","\n","\n","# find the cutoff point to filter outlier from the upper wishker of a boxplot\n","boxplot(titanic_full$Fare)\n","boxplot.stats(titanic_full$Fare)\n","fare_upper_wishker <- boxplot.stats(titanic_full$Fare)$stats[5] \n","\n","# build a filter\n","fare_outlier_filter <- titanic_full$Fare < fare_upper_wishker\n","\n","# filter the titanic_full\n","titanic_filtered_with_fare <- titanic_full[fare_outlier_filter,]\n","\n","# but if we check the filtered data, some NAs are still there and need to be drop\n","colSums(is.na(titanic_filtered_with_fare))\n","titanic_filtered_with_fare_and_without_NA <- titanic_filtered_with_fare %>%\n","  select(-Cabin, -Survived, -PassengerId, -Name) %>%\n","  drop_na()\n","sum(is.na(titanic_filtered_with_fare_and_without_NA))\n","\n","# to build a model to predict fare, first create the equation\n","fare_equation = \"Fare ~ Pclass + Sex + Age + SibSp + Parch + Embarked\"\n","fare_model <- lm(formula = fare_equation, \n","                 data = titanic_filtered_with_fare_and_without_NA)"]},{"cell_type":"markdown","id":"2eae7380","metadata":{"_cell_guid":"8d3d3233-b353-4452-a74f-1ce14f63618c","_uuid":"dc829dfd-41ad-4462-94e3-9c8588489ced","papermill":{"duration":0.14394,"end_time":"2022-04-01T13:50:53.376761","exception":false,"start_time":"2022-04-01T13:50:53.232821","status":"completed"},"tags":[]},"source":["2. Identify and impute the missing values in Fare"]},{"cell_type":"code","execution_count":5,"id":"741835a6","metadata":{"_cell_guid":"7acf8963-6ecc-4cac-b623-9a200615d6cb","_uuid":"ae298c9d-d693-4e39-83bd-47154966f45e","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:53.672214Z","iopub.status.busy":"2022-04-01T13:50:53.670102Z","iopub.status.idle":"2022-04-01T13:50:53.73047Z","shell.execute_reply":"2022-04-01T13:50:53.728965Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.209291,"end_time":"2022-04-01T13:50:53.730612","exception":false,"start_time":"2022-04-01T13:50:53.521321","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["\n","Call:\n","lm(formula = fare_equation, data = titanic_filtered_with_fare_and_without_NA)\n","\n","Coefficients:\n","(Intercept)       Pclass      Sexmale          Age        SibSp        Parch  \n","   47.92729    -12.59886     -0.37897      0.01216      5.07915      4.38330  \n","  EmbarkedQ    EmbarkedS  \n","   -3.93030     -3.45602  \n","\n","\u001b[90m# A tibble: 1 × 6\u001b[39m\n","  Pclass Sex     Age SibSp Parch Embarked\n","   \u001b[3m\u001b[90m<dbl>\u001b[39m\u001b[23m \u001b[3m\u001b[90m<chr>\u001b[39m\u001b[23m \u001b[3m\u001b[90m<dbl>\u001b[39m\u001b[23m \u001b[3m\u001b[90m<dbl>\u001b[39m\u001b[23m \u001b[3m\u001b[90m<dbl>\u001b[39m\u001b[23m \u001b[3m\u001b[90m<chr>\u001b[39m\u001b[23m   \n","\u001b[90m1\u001b[39m      3 male   60.5     0     0 S       \n","       1 \n","7.031158 \n"]}],"source":["# time to predict\n","# new data is data where Fare is missing\n","data_with_missing_fare <- titanic_full[is.na(titanic_full$Fare), \n","                           c(\"Pclass\", \"Sex\", \"Age\", \"SibSp\", \"Parch\", \"Embarked\")]\n","\n","fare_prediction <- predict(fare_model, newdata = data_with_missing_fare)\n","print(fare_model)\n","print(data_with_missing_fare)\n","print(fare_prediction)"]},{"cell_type":"code","execution_count":6,"id":"2742f7cf","metadata":{"_cell_guid":"5e200d32-0a9c-4b77-92f0-0504b7aaf0f2","_uuid":"9736c93b-0e08-4237-a0cc-55606600b48d","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:54.032366Z","iopub.status.busy":"2022-04-01T13:50:54.030199Z","iopub.status.idle":"2022-04-01T13:50:54.048858Z","shell.execute_reply":"2022-04-01T13:50:54.047479Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.171037,"end_time":"2022-04-01T13:50:54.048964","exception":false,"start_time":"2022-04-01T13:50:53.877927","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0"],"text/latex":["0"],"text/markdown":["0"],"text/plain":["[1] 0"]},"metadata":{},"output_type":"display_data"}],"source":["# now we can impute the missing fare with the prediction\n","\n","titanic_full[is.na(titanic_full$Fare), \"Fare\"] <- fare_prediction\n","\n","# check\n","sum(is.na(titanic_full$Fare)) # 0 means Fare has been imputed"]},{"cell_type":"markdown","id":"6090dd90","metadata":{"_cell_guid":"c363c56a-3db7-40c6-9d09-264afc4afb55","_uuid":"52e927ec-7723-4fd7-bd79-a08ed2e061ec","papermill":{"duration":0.148574,"end_time":"2022-04-01T13:50:54.347166","exception":false,"start_time":"2022-04-01T13:50:54.198592","status":"completed"},"tags":[]},"source":["<a id=\"subone-3\"></a>\n","### Embarked Imputation"]},{"cell_type":"markdown","id":"a6acb404","metadata":{"_cell_guid":"4241f79f-7e8f-4743-9a50-6eb2f4b91a01","_uuid":"38146abe-5250-43f3-bed3-d819bfe52467","papermill":{"duration":0.149946,"end_time":"2022-04-01T13:50:54.645654","exception":false,"start_time":"2022-04-01T13:50:54.495708","status":"completed"},"tags":[]},"source":["1. Prepare"]},{"cell_type":"code","execution_count":7,"id":"70def05c","metadata":{"_cell_guid":"463ecfee-d62f-42ba-8f32-6f34edbce441","_uuid":"33cca0d6-8664-4df6-ac31-604647b7e3fc","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:54.949135Z","iopub.status.busy":"2022-04-01T13:50:54.947284Z","iopub.status.idle":"2022-04-01T13:50:55.015787Z","shell.execute_reply":"2022-04-01T13:50:55.014439Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.221097,"end_time":"2022-04-01T13:50:55.015901","exception":false,"start_time":"2022-04-01T13:50:54.794804","status":"completed"},"tags":[]},"outputs":[{"data":{"text/plain":["\n","   C    Q    S <NA> \n"," 270  123  914    2 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>'S'</li><li>'C'</li><li>'Q'</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 'S'\n","\\item 'C'\n","\\item 'Q'\n","\\end{enumerate*}\n"],"text/markdown":["1. 'S'\n","2. 'C'\n","3. 'Q'\n","\n","\n"],"text/plain":["[1] \"S\" \"C\" \"Q\""]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["1307"],"text/latex":["1307"],"text/markdown":["1307"],"text/plain":["[1] 1307"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>1309</li><li>13</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 1309\n","\\item 13\n","\\end{enumerate*}\n"],"text/markdown":["1. 1309\n","2. 13\n","\n","\n"],"text/plain":["[1] 1309   13"]},"metadata":{},"output_type":"display_data"}],"source":["# now let's impute embark with kNN\n","# BUT before that, we need to perform categorical casting\n","\n","titanic_full_cat_casted <- titanic_full %>%\n","  mutate(\n","    Pclass = as.integer(as.factor(titanic_full$Pclass)),\n","    Sex = as.integer(as.factor(titanic_full$Sex)),\n","    SibSp = as.integer(as.factor(titanic_full$SibSp)),\n","    Parch = as.integer(as.factor(titanic_full$Parch))\n","  )\n","\n","table(titanic_full_cat_casted$Embarked, useNA=\"always\") \n","# because Embarked has 3 category\n","# we'll use kNN to find out\n","\n","library(class) # load the package\n","embarked_label <- na.omit(titanic_full_cat_casted$Embarked)\n","unique(embarked_label)\n","length(embarked_label)\n","dim(titanic_full_cat_casted)"]},{"cell_type":"code","execution_count":8,"id":"c9270771","metadata":{"_cell_guid":"5a3a7256-dcb6-4cbc-a7e7-34b09990f9fd","_uuid":"a9b4aa6d-3f7d-49d4-8669-d4554572aa5d","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:55.338114Z","iopub.status.busy":"2022-04-01T13:50:55.336247Z","iopub.status.idle":"2022-04-01T13:50:55.400436Z","shell.execute_reply":"2022-04-01T13:50:55.39898Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.225848,"end_time":"2022-04-01T13:50:55.400552","exception":false,"start_time":"2022-04-01T13:50:55.174704","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>1307</li><li>13</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 1307\n","\\item 13\n","\\end{enumerate*}\n"],"text/markdown":["1. 1307\n","2. 13\n","\n","\n"],"text/plain":["[1] 1307   13"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Pclass</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Fare</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Pclass] 0\n","\\item[Sex] 0\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Fare] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Pclass\n",":   0Sex\n",":   0SibSp\n",":   0Parch\n",":   0Fare\n",":   0\n","\n"],"text/plain":["PassengerId      Pclass         Sex       SibSp       Parch        Fare \n","          0           0           0           0           0           0 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>1307</li><li>6</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 1307\n","\\item 6\n","\\end{enumerate*}\n"],"text/markdown":["1. 1307\n","2. 6\n","\n","\n"],"text/plain":["[1] 1307    6"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["1307"],"text/latex":["1307"],"text/markdown":["1307"],"text/plain":["[1] 1307"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0"],"text/latex":["0"],"text/markdown":["0"],"text/plain":["[1] 0"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>2</li><li>6</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 2\n","\\item 6\n","\\end{enumerate*}\n"],"text/markdown":["1. 2\n","2. 6\n","\n","\n"],"text/plain":["[1] 2 6"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0"],"text/latex":["0"],"text/markdown":["0"],"text/plain":["[1] 0"]},"metadata":{},"output_type":"display_data"}],"source":["# need to drop some rows that has NA in Embarked so the number of rows is equal\n","titanic_same_length_with_embarked_label <- subset(x = titanic_full_cat_casted,\n","                                                  subset = !is.na (titanic_full_cat_casted$Embarked))\n","dim(titanic_same_length_with_embarked_label)\n","\n","\n","embarked_knn_train <- titanic_same_length_with_embarked_label %>% \n","                      select(-Cabin, -Age, -Ticket, -Survived, -Name, -Embarked, -is_train_set) \n","\n","colSums(is.na(embarked_knn_train))                             \n","dim(embarked_knn_train)\n","length(embarked_label)\n","sum(is.na(embarked_label))\n","\n","# row that has NA in embark for the test\n","titanic_embark <- titanic_full_cat_casted[is.na(titanic_full_cat_casted$Embarked),] \n","embarked_test <- titanic_embark %>% \n","  select(-Cabin, -Age, -Ticket, -Survived, -Name, -Embarked, -is_train_set) %>%\n","  drop_na()\n","\n","# should be 2 rows\n","dim(embarked_test)\n","sum(is.na(embarked_test))"]},{"cell_type":"markdown","id":"2f9ef69a","metadata":{"_cell_guid":"fb1cc508-9b58-4d82-9488-2c6958363afc","_uuid":"0138099a-bf4b-4c53-ad95-9e584402453b","papermill":{"duration":0.212186,"end_time":"2022-04-01T13:50:55.785992","exception":false,"start_time":"2022-04-01T13:50:55.573806","status":"completed"},"tags":[]},"source":["2. Identify and impute the missing values in Embarked"]},{"cell_type":"code","execution_count":9,"id":"631e0dd1","metadata":{"_cell_guid":"fdff8338-1c76-4585-bfce-91b3237003a3","_uuid":"a4f07d52-65db-48d5-8f3a-f464a313c70f","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:56.174053Z","iopub.status.busy":"2022-04-01T13:50:56.165607Z","iopub.status.idle":"2022-04-01T13:50:56.213803Z","shell.execute_reply":"2022-04-01T13:50:56.212475Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.250895,"end_time":"2022-04-01T13:50:56.213916","exception":false,"start_time":"2022-04-01T13:50:55.963021","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["[1] S S\n","Levels: C Q S\n"]},{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Survived</dt><dd>418</dd><dt>Pclass</dt><dd>0</dd><dt>Name</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>Age</dt><dd>263</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Ticket</dt><dd>0</dd><dt>Fare</dt><dd>0</dd><dt>Cabin</dt><dd>1014</dd><dt>Embarked</dt><dd>0</dd><dt>is_train_set</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Survived] 418\n","\\item[Pclass] 0\n","\\item[Name] 0\n","\\item[Sex] 0\n","\\item[Age] 263\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Ticket] 0\n","\\item[Fare] 0\n","\\item[Cabin] 1014\n","\\item[Embarked] 0\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Survived\n",":   418Pclass\n",":   0Name\n",":   0Sex\n",":   0Age\n",":   263SibSp\n",":   0Parch\n",":   0Ticket\n",":   0Fare\n",":   0Cabin\n",":   1014Embarked\n",":   0is_train_set\n",":   0\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","           0          418            0            0            0          263 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","           0            0            0            0         1014            0 \n","is_train_set \n","           0 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Survived</dt><dd>418</dd><dt>Pclass</dt><dd>0</dd><dt>Name</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>Age</dt><dd>263</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Ticket</dt><dd>0</dd><dt>Fare</dt><dd>0</dd><dt>Cabin</dt><dd>1014</dd><dt>Embarked</dt><dd>0</dd><dt>is_train_set</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Survived] 418\n","\\item[Pclass] 0\n","\\item[Name] 0\n","\\item[Sex] 0\n","\\item[Age] 263\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Ticket] 0\n","\\item[Fare] 0\n","\\item[Cabin] 1014\n","\\item[Embarked] 0\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Survived\n",":   418Pclass\n",":   0Name\n",":   0Sex\n",":   0Age\n",":   263SibSp\n",":   0Parch\n",":   0Ticket\n",":   0Fare\n",":   0Cabin\n",":   1014Embarked\n",":   0is_train_set\n",":   0\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","           0          418            0            0            0          263 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","           0            0            0            0         1014            0 \n","is_train_set \n","           0 "]},"metadata":{},"output_type":"display_data"}],"source":["# identify embarked class with kNN \n","embarked_result <- knn(train = embarked_knn_train,\n","                       test = embarked_test,\n","                       cl = embarked_label,\n","                       k=7)\n","print(embarked_result)\n","\n","# let's insert the result into the dataframe titanic_full and titanic_full_cat casted\n","titanic_full[is.na(titanic_full$Embarked), \"Embarked\"] <- embarked_result\n","titanic_full_cat_casted[is.na(titanic_full_cat_casted$Embarked), \"Embarked\"] <- embarked_result\n","colSums(is.na(titanic_full)) \n","colSums(is.na(titanic_full_cat_casted))\n","\n","# recast embarked from character into factor, then into numeric\n","# why? because I still need titanic_full_cat_casted for another kNN imputation\n","titanic_full_cat_casted <- titanic_full_cat_casted %>%\n","  mutate(Embarked = as.integer(as.factor(Embarked)))"]},{"cell_type":"markdown","id":"54bf4654","metadata":{"_cell_guid":"7ad02fa9-e254-494a-9598-8a6938a53240","_uuid":"148e2789-29e1-485a-8a74-e5358e007a9b","papermill":{"duration":0.177368,"end_time":"2022-04-01T13:50:56.591238","exception":false,"start_time":"2022-04-01T13:50:56.41387","status":"completed"},"tags":[]},"source":["<a id=\"subone-4\"></a>\n","### Cabin Imputation"]},{"cell_type":"markdown","id":"1e537323","metadata":{"_cell_guid":"d4b7e152-fe95-4895-98d7-44b821294a44","_uuid":"949a1760-684c-47b3-8e8d-1f301cf3be46","papermill":{"duration":0.17859,"end_time":"2022-04-01T13:50:56.951044","exception":false,"start_time":"2022-04-01T13:50:56.772454","status":"completed"},"tags":[]},"source":["1. Prepare"]},{"cell_type":"code","execution_count":10,"id":"8fe68ae2","metadata":{"_cell_guid":"3acc34c8-1587-4eb3-9444-31b3a682661f","_uuid":"3a4905c0-0cd6-41ec-ad59-8360784b491f","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:57.314653Z","iopub.status.busy":"2022-04-01T13:50:57.312835Z","iopub.status.idle":"2022-04-01T13:50:57.350447Z","shell.execute_reply":"2022-04-01T13:50:57.348914Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.221308,"end_time":"2022-04-01T13:50:57.350586","exception":false,"start_time":"2022-04-01T13:50:57.129278","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["295"],"text/latex":["295"],"text/markdown":["295"],"text/plain":["[1] 295"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>295</li><li>7</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 295\n","\\item 7\n","\\end{enumerate*}\n"],"text/markdown":["1. 295\n","2. 7\n","\n","\n"],"text/plain":["[1] 295   7"]},"metadata":{},"output_type":"display_data"}],"source":["# reduce the complexity of Cabin into categorical data based on the first letter\n","titanic_cabin_label <- str_sub(string = titanic_full_cat_casted$Cabin,  \n","                               start = 1, \n","                               end = 1) %>% na.omit()\n","length(titanic_cabin_label)\n","  \n","# prepare titanic_full for kNN\n","titanic_cabin_train <- titanic_full_cat_casted %>%\n","  filter(titanic_full_cat_casted$Cabin != is.na(titanic_full_cat_casted$Cabin)) %>%\n","  select(PassengerId, Pclass, Sex, SibSp, Parch, Fare, Embarked)\n","\n","# check dimension\n","dim(titanic_cabin_train)"]},{"cell_type":"code","execution_count":11,"id":"51a03880","metadata":{"_cell_guid":"6ef0456e-58c1-4965-804b-777a5ae52d07","_uuid":"946b09c3-6483-4511-bec6-2b29d4fe6d6a","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:57.744545Z","iopub.status.busy":"2022-04-01T13:50:57.743669Z","iopub.status.idle":"2022-04-01T13:50:57.847874Z","shell.execute_reply":"2022-04-01T13:50:57.844775Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.31498,"end_time":"2022-04-01T13:50:57.848044","exception":false,"start_time":"2022-04-01T13:50:57.533064","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["295"],"text/latex":["295"],"text/markdown":["295"],"text/plain":["[1] 295"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>295</li><li>7</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 295\n","\\item 7\n","\\end{enumerate*}\n"],"text/markdown":["1. 295\n","2. 7\n","\n","\n"],"text/plain":["[1] 295   7"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>1014</li><li>7</li></ol>\n"],"text/latex":["\\begin{enumerate*}\n","\\item 1014\n","\\item 7\n","\\end{enumerate*}\n"],"text/markdown":["1. 1014\n","2. 7\n","\n","\n"],"text/plain":["[1] 1014    7"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Pclass</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Fare</dt><dd>0</dd><dt>Embarked</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Pclass] 0\n","\\item[Sex] 0\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Fare] 0\n","\\item[Embarked] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Pclass\n",":   0Sex\n",":   0SibSp\n",":   0Parch\n",":   0Fare\n",":   0Embarked\n",":   0\n","\n"],"text/plain":["PassengerId      Pclass         Sex       SibSp       Parch        Fare \n","          0           0           0           0           0           0 \n","   Embarked \n","          0 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Pclass</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Fare</dt><dd>0</dd><dt>Embarked</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Pclass] 0\n","\\item[Sex] 0\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Fare] 0\n","\\item[Embarked] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Pclass\n",":   0Sex\n",":   0SibSp\n",":   0Parch\n",":   0Fare\n",":   0Embarked\n",":   0\n","\n"],"text/plain":["PassengerId      Pclass         Sex       SibSp       Parch        Fare \n","          0           0           0           0           0           0 \n","   Embarked \n","          0 "]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0"],"text/latex":["0"],"text/markdown":["0"],"text/plain":["[1] 0"]},"metadata":{},"output_type":"display_data"}],"source":["# prepare for the test dataframe\n","titanic_cabin_test <- titanic_full_cat_casted %>%\n","  filter(is.na(Cabin)) %>%\n","  select(PassengerId, Pclass, Sex, SibSp, Parch, Fare, Embarked)\n","\n","# check length and dimension compatibility\n","length(titanic_cabin_label)\n","dim(titanic_cabin_train)\n","dim(titanic_cabin_test)\n","\n","# check na\n","colSums(is.na(titanic_cabin_train))\n","colSums(is.na(titanic_cabin_test))\n","sum(is.na(titanic_cabin_label))"]},{"cell_type":"markdown","id":"1346b37c","metadata":{"_cell_guid":"59e894b7-7345-4f49-a70d-82beb3e067af","_uuid":"c7d07935-7396-4e2e-a5de-2b5bec16aa35","papermill":{"duration":0.255872,"end_time":"2022-04-01T13:50:58.441828","exception":false,"start_time":"2022-04-01T13:50:58.185956","status":"completed"},"tags":[]},"source":["2. Identify and impute missing values in Cabin"]},{"cell_type":"code","execution_count":12,"id":"9e5ab6d8","metadata":{"_cell_guid":"08bff8fb-35e0-4e1b-a71d-40544d0c8e88","_uuid":"bb5ac838-c1e1-4a74-8a05-40d01cd06e15","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:58.839221Z","iopub.status.busy":"2022-04-01T13:50:58.837511Z","iopub.status.idle":"2022-04-01T13:50:58.863619Z","shell.execute_reply":"2022-04-01T13:50:58.862095Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.226496,"end_time":"2022-04-01T13:50:58.863733","exception":false,"start_time":"2022-04-01T13:50:58.637237","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li><li>C</li></ol>\n","\n","<details>\n","\t<summary style=display:list-item;cursor:pointer>\n","\t\t<strong>Levels</strong>:\n","\t</summary>\n","\t<style>\n","\t.list-inline {list-style: none; margin:0; padding: 0}\n","\t.list-inline>li {display: inline-block}\n","\t.list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","\t</style>\n","\t<ol class=list-inline><li>'A'</li><li>'B'</li><li>'C'</li><li>'D'</li><li>'E'</li><li>'F'</li><li>'G'</li><li>'T'</li></ol>\n","</details>"],"text/latex":["\\begin{enumerate*}\n","\\item C\n","\\item C\n","\\item C\n","\\item C\n","\\item C\n","\\item C\n","\\end{enumerate*}\n","\n","\\emph{Levels}: \\begin{enumerate*}\n","\\item 'A'\n","\\item 'B'\n","\\item 'C'\n","\\item 'D'\n","\\item 'E'\n","\\item 'F'\n","\\item 'G'\n","\\item 'T'\n","\\end{enumerate*}\n"],"text/markdown":["1. C\n","2. C\n","3. C\n","4. C\n","5. C\n","6. C\n","\n","\n","\n","**Levels**: 1. 'A'\n","2. 'B'\n","3. 'C'\n","4. 'D'\n","5. 'E'\n","6. 'F'\n","7. 'G'\n","8. 'T'\n","\n","\n"],"text/plain":["[1] C C C C C C\n","Levels: A B C D E F G T"]},"metadata":{},"output_type":"display_data"}],"source":["# let's execute kNN to identify Cabin label\n","cabin_result <- knn(train = titanic_cabin_train,\n","                    test = titanic_cabin_test,\n","                    cl = titanic_cabin_label, \n","                    k = 7)\n","head(cabin_result)\n","\n","\n","# now let's insert the result back into the dataframe\n","titanic_full[is.na(titanic_full$Cabin), \"Cabin\"] <- cabin_result"]},{"cell_type":"code","execution_count":13,"id":"4ee215f0","metadata":{"_cell_guid":"53ca2cd6-2d5e-4cdf-b256-e4dd70a849f6","_uuid":"2b74a5a9-f118-4e64-9061-b7dd86ecd4d7","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:50:59.266645Z","iopub.status.busy":"2022-04-01T13:50:59.264769Z","iopub.status.idle":"2022-04-01T13:50:59.310643Z","shell.execute_reply":"2022-04-01T13:50:59.309185Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.245484,"end_time":"2022-04-01T13:50:59.310756","exception":false,"start_time":"2022-04-01T13:50:59.065272","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["spec_tbl_df [1,309 × 13] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n"," $ PassengerId : num [1:1309] 1 2 3 4 5 6 7 8 9 10 ...\n"," $ Survived    : num [1:1309] 0 1 1 1 0 0 0 0 1 1 ...\n"," $ Pclass      : num [1:1309] 3 1 3 1 3 3 1 3 3 2 ...\n"," $ Name        : chr [1:1309] \"Braund, Mr. Owen Harris\" \"Cumings, Mrs. John Bradley (Florence Briggs Thayer)\" \"Heikkinen, Miss. Laina\" \"Futrelle, Mrs. Jacques Heath (Lily May Peel)\" ...\n"," $ Sex         : chr [1:1309] \"male\" \"female\" \"female\" \"female\" ...\n"," $ Age         : num [1:1309] 22 38 26 35 35 NA 54 2 27 14 ...\n"," $ SibSp       : num [1:1309] 1 1 0 1 0 0 0 3 0 1 ...\n"," $ Parch       : num [1:1309] 0 0 0 0 0 0 0 1 2 0 ...\n"," $ Ticket      : chr [1:1309] \"A/5 21171\" \"PC 17599\" \"STON/O2. 3101282\" \"113803\" ...\n"," $ Fare        : num [1:1309] 7.25 71.28 7.92 53.1 8.05 ...\n"," $ Cabin       : chr [1:1309] \"C\" \"C\" \"C\" \"C\" ...\n"," $ Embarked    : chr [1:1309] \"S\" \"C\" \"S\" \"S\" ...\n"," $ is_train_set: logi [1:1309] TRUE TRUE TRUE TRUE TRUE TRUE ...\n"," - attr(*, \"spec\")=\n","  .. cols(\n","  ..   PassengerId = \u001b[32mcol_double()\u001b[39m,\n","  ..   Survived = \u001b[32mcol_double()\u001b[39m,\n","  ..   Pclass = \u001b[32mcol_double()\u001b[39m,\n","  ..   Name = \u001b[31mcol_character()\u001b[39m,\n","  ..   Sex = \u001b[31mcol_character()\u001b[39m,\n","  ..   Age = \u001b[32mcol_double()\u001b[39m,\n","  ..   SibSp = \u001b[32mcol_double()\u001b[39m,\n","  ..   Parch = \u001b[32mcol_double()\u001b[39m,\n","  ..   Ticket = \u001b[31mcol_character()\u001b[39m,\n","  ..   Fare = \u001b[32mcol_double()\u001b[39m,\n","  ..   Cabin = \u001b[31mcol_character()\u001b[39m,\n","  ..   Embarked = \u001b[31mcol_character()\u001b[39m\n","  .. )\n"," - attr(*, \"problems\")=<externalptr> \n"]},{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Survived</dt><dd>418</dd><dt>Pclass</dt><dd>0</dd><dt>Name</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>Age</dt><dd>263</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Ticket</dt><dd>0</dd><dt>Fare</dt><dd>0</dd><dt>Cabin</dt><dd>0</dd><dt>Embarked</dt><dd>0</dd><dt>is_train_set</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Survived] 418\n","\\item[Pclass] 0\n","\\item[Name] 0\n","\\item[Sex] 0\n","\\item[Age] 263\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Ticket] 0\n","\\item[Fare] 0\n","\\item[Cabin] 0\n","\\item[Embarked] 0\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Survived\n",":   418Pclass\n",":   0Name\n",":   0Sex\n",":   0Age\n",":   263SibSp\n",":   0Parch\n",":   0Ticket\n",":   0Fare\n",":   0Cabin\n",":   0Embarked\n",":   0is_train_set\n",":   0\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","           0          418            0            0            0          263 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","           0            0            0            0            0            0 \n","is_train_set \n","           0 "]},"metadata":{},"output_type":"display_data"}],"source":["# mutate the Cabin into its more categorical dimension\n","titanic_full <- titanic_full %>%\n","  mutate(Cabin = str_sub(string = titanic_full$Cabin,  \n","                         start = 1, \n","                         end = 1))\n","str(titanic_full)\n","colSums(is.na(titanic_full))"]},{"cell_type":"markdown","id":"844e7323","metadata":{"_cell_guid":"c080d0af-72da-4d20-a9af-493c7a775aca","_uuid":"7ad28820-8ffb-4cfd-9f86-949ce572914b","papermill":{"duration":0.200164,"end_time":"2022-04-01T13:50:59.71259","exception":false,"start_time":"2022-04-01T13:50:59.512426","status":"completed"},"tags":[]},"source":["<a id=\"subone-5\"></a>\n","### Age Imputation"]},{"cell_type":"markdown","id":"111d8977","metadata":{"_cell_guid":"c7f7d1a5-34bc-4b45-a3ec-ce74a85a38b6","_uuid":"fafa30e1-2b61-4ea3-8faa-e1f5e06b4c5f","papermill":{"duration":0.203695,"end_time":"2022-04-01T13:51:00.123277","exception":false,"start_time":"2022-04-01T13:50:59.919582","status":"completed"},"tags":[]},"source":["1. Prepare"]},{"cell_type":"code","execution_count":14,"id":"d2e300cf","metadata":{"_cell_guid":"2fc87cac-9fb1-4966-a31b-affe84f345cc","_uuid":"0ece26eb-d899-4af6-9487-1582bcac9ed6","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:00.527689Z","iopub.status.busy":"2022-04-01T13:51:00.525843Z","iopub.status.idle":"2022-04-01T13:51:00.604242Z","shell.execute_reply":"2022-04-01T13:51:00.602815Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.281196,"end_time":"2022-04-01T13:51:00.604384","exception":false,"start_time":"2022-04-01T13:51:00.323188","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Survived</dt><dd>418</dd><dt>Pclass</dt><dd>0</dd><dt>Name</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>Age</dt><dd>263</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Ticket</dt><dd>0</dd><dt>Fare</dt><dd>0</dd><dt>Cabin</dt><dd>0</dd><dt>Embarked</dt><dd>0</dd><dt>is_train_set</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Survived] 418\n","\\item[Pclass] 0\n","\\item[Name] 0\n","\\item[Sex] 0\n","\\item[Age] 263\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Ticket] 0\n","\\item[Fare] 0\n","\\item[Cabin] 0\n","\\item[Embarked] 0\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Survived\n",":   418Pclass\n",":   0Name\n",":   0Sex\n",":   0Age\n",":   263SibSp\n",":   0Parch\n",":   0Ticket\n",":   0Fare\n",":   0Cabin\n",":   0Embarked\n",":   0is_train_set\n",":   0\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","           0          418            0            0            0          263 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","           0            0            0            0            0            0 \n","is_train_set \n","           0 "]},"metadata":{},"output_type":"display_data"},{"data":{"image/png":"iVBORw0KGgoAAAANSUhEUgAAA0gAAANICAIAAAByhViMAAAABmJLR0QA/wD/AP+gvaeTAAAg\nAElEQVR4nO3da3xV9Z3v8ZXsQBIBSbhJAPUIY4VapC0qXlpLjAhYbtapFJVaKq0WrdhiL2Ol\naGdktKeKKEJtRYtYYLQigobBy6DiET1iizqIlKK0BbxxRwwJ7OQ8SA8qmLDq2Ky1/7zfD3jV\n7P3K6/dIP92LfJNXV1cXAQCQ+/KTPgAAgE+GsAMACISwAwAIhLADAAiEsAMACISwAwAIhLAD\nAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISw\nAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiE\nsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAI\nhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMA\nCISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLAD\nAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISw\nAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiE\nsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAI\nhLADAAiEsAMACISwAwAIREHSB+SAbdu2zZgxo6qqKulDAIBUKC4uvvDCC1u3bp30IfsSdgf2\n29/+duzYsUlfAQCkSEFBwZgxY5K+Yl/C7sB2794dRdH06dN79eqV9C0AQMJefPHFiy66qD4P\n0kbYxXXMMcf07t076SsAgITt2rUr6RMa5IcnAAACIewAAAIh7AAAAiHsAAACIewAAAIh7AAA\nAiHsAAACIewAAAIh7AAAApGrv3liyxuvr1q1+q3N23e+t6ugqEXrth2P7t6ja1lJ0ncBACQm\nx8KuLrvt3knX3jJ91jOvvrX/qx27n3Te6LHjxw4vKchr+tsAAJKVS2GXrVk/6oReM1/alGnW\nps/pQ47r0a2sXUlhYcGe6uqtG9/88+oVzyx57qYrR9w966EXl97dqbmnzADAwSWXwm7puAEz\nX9r0hcsmz75+TJcWH3F5bc2m2TdcOnLCrH7fHb3i9r5NfiAAQJJy6WOtq2aubll2yZJbL//I\nqouiKL952/PHz5nW57A1c65u4tsAABKXS5/Yvbxzd8vugw/4tt6nddi9bEUT3AMcPN57773H\nHnts1apVURQdc8wxZ5xxxiGHHJL0UQD7yqWwG9q2eM6r179ZM6BjI39/rrbqznvXFpUObMK7\ngMDdfvvtP/nJTzZt2rT3K23btp04ceK3v/3tBK8C2F8uPYr9yQ39q7ct+cxJ596z6IWd2bp9\nX66rfmXJA6P79Zi2dnvfCROSOBAI0HXXXXfJJZe0atVq8uTJzz333HPPPTd58uSWLVtefPHF\nEydOTPo6gA/JpU/sjr7wvl8/f+bFU+eOHHB/pnnrrkd369S+pLCwWbametvGN15bvWbzrj15\neXnlY26bf2mPpI8FQrBixYprrrmmd+/ejz/+eOvWreu/eOKJJ1544YWnn376hAkThg4deuyx\nxyZ7JMBeuRR2UZQ/espjA0fOu+2u2ZWLn3115R9Wr/jb53Z5+YVduh3br7z/iNGXDz2hc7JX\nAsG488479+zZM3Xq1L1VV69169ZTp0496aST7rrrrl/84hdJnQewj9wKuyiKos59hk3sM2xi\nFNXtqdq6dcfOqprmxYe0Kikt/lijxNlstrKycteuXY285w9/+EMURbt37/6YFwM564UXXmjf\nvv2JJ564/0t9+vRp167dsmXLmv4qgIbkXtjtlVdQXNquuDSKslXr5826/0/rt7Q5vMeZZw88\nsoExlI+0ePHiIUOGxHnnrFmz+vbt+zFvBXLT9u3b9/ms7oNKSkp27NjRlPcANC7Hwm7Ligcv\n/+FNTz37/PbmXc67ctpt4yo2LrvzlPLvrH63pv4NzQ458l9mLLr2n4+J+Q3Ly8vnz5/f+Cd2\nU6dOfeKJJ7p06fI/vR7INWVlZatWraquri4sLNznpV27dq1fv/6YY+L+2wagCeRS2L331sM9\ne5+zvjpb3LZzwaY1U688o6rjI8sv+c5ru9t/51++c/wx7f/y8jO33jLz3772+cP/9Obo/9Uq\nzvfMZDKDBx9gG6+ysjKKovz8XPoJYuAT0a9fv8rKylmzZo0aNWqfl2bNmlVVVXXGGWckchjA\nR8qlWJl/wSUbamp/PPv3721ct/XdNyYMPPyuC858qfrQB1e/OnXiT7554bev+cVv1rz4m+Z1\nVePPm5v0sUAILrroorKysssvv3zRokUf/PqiRYvGjh1bVlZ20UUXJXUbwP5yKez+fenbrY4Y\n/+9f+1wURfnNO/xo5s1RFHU4ceqXD2+59z0lPUb+/OjSTS/dmNiVQEBatWr1wAMPFBQUDBgw\n4JRTThk3btyVV155yimnDBgwoKCgYN68ea1axXo4ANA0culR7Jpde1oddsLefyw89ItRFLX+\n9L7jJt0Pb5H90+tNehkQrj59+ixfvvzaa6/93e9+t3Tp0iiKDj300FGjRl1zzTVHHHFE0tcB\nfEguhd2phzZ/+vWZ2WhQJoqiKNr++p1RFL399LNRdMoH37Zg5dbmrT5imwDg4znyyCPvvPPO\nX/3qVxs2bIiiqFOnTgUFufQvT+DgkUuPYsef3+29d+4tv3Ty8yv+tOyJ+88787qC4tZbXv3h\n1b97ae97nrz9m7eu33H4oB8neCcQpIKCgiOOOOKII45QdUBq5dK/nk7+ReWQyp7zp15x4tQr\noijKb9bm9pdWPP3l7td9tdcDp/TrfUyHv7789BPL/ty85WfumfqlpI8FAGhquRR2mcIj5r6y\ncsatv3rquRd2NOv0te/921e7t79w+ZJo6LkzFj/6yjNRFEVdTx1+2z13nNiqedLHAgA0tVwK\nuyiKMoWdvnnlNd/8wFeater5m/9a+Ys/r1q9bmtpl2O6H1mS2HEAAInKsbBrSLsjj2l3ZNJH\nAAAkKpd+eAIAgEYIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsA\ngEAIOwCAQATyu2IB/qGeeuqp++67b+XKlVEU9ejR46tf/eppp52W9FEA+xJ2AI3ZuXPn17/+\n9blz50ZRVFJSEkXR448/PmXKlHPOOWfGjBktWrRI+kCA93kUC9CYESNGzJ07d/jw4StXrtyy\nZcuWLVtWrlw5fPjw+++//7zzzkv6OoAP8YkdQIMWLly4YMGCr3/96zNmzNj7xe7du8+ZM6d5\n8+YzZ85cuHDhwIEDE7wQ4IN8YgfQoDlz5uTl5V133XX7vzRx4sS8vLz/+I//aPqrABoi7AAa\n9Mc//rFLly5dunTZ/6X6r//xj39s+qsAGiLsABpUW1ubyWQaejWTyWSz2aa8B6Bxwg6gQV27\ndl23bt3GjRv3f2njxo1//etfu3bt2vRXATRE2AE06Ctf+cqePXsmTpy4/0sTJ07MZrNf+cpX\nmv4qgIYIO4AGnXPOOaeeeuqkSZPGjRu3ZcuW+i9u2bJl3LhxkyZN+sIXvnDOOeckeyHAB5k7\nAWhQfn7+Aw88MGzYsJtuuumWW27p0aNHFEUrV67cs2fPqaee+sADD+Tn+7/HQIr4VxJAY9q3\nb//UU0/NmjXry1/+ck1Nze7duwcNGjRr1qwnn3yyXbt2SV8H8CE+sQM4gEwmM2LEiBEjRiR9\nCMAB+MQOACAQPrEDOLBsNrts2bJXX301iqLu3bsff/zxjezbASRF2AEcwLx588aNG/faa6/t\n/UrXrl1vvPHGYcOGJXgVwP48igVozC9/+cuzzz5727ZtV1111YIFCxYsWHDVVVdt27bt7LPP\nvv3225O+DuBDfGIH0KDXXnvtiiuuOOaYYxYvXlxWVlb/xUGDBl122WXl5eVjx47t16+fXz4B\npIdP7AAadMcdd1RXV//yl7/cW3X1ysrKpk2bVl1dPX369KRuA9ifsANo0LPPPltaWvqlL31p\n/5f69u1bWlr67LPPNv1VAA0RdgAN2rp1a7t27fLy8vZ/KS8vr23btnt/zxhAGgg7gAa1b9/+\nzTff3LNnz/4v7d69+8033+zQoUPTXwXQEGEH0KDy8vIdO3bMmzdv/5fmzZv37rvv9u3bt8mP\nAmiQsANo0OjRo0tLS7/zne8sW7bsg19ftmzZmDFjSktLR48endRtAPszdwLQoHbt2s2ePXvY\nsGEnn3zyoEGDTjnllCiKnnnmmQULFjRr1uzBBx9s165d0jcCvE/YATSmf//+zz333I9//OMF\nCxbUP5PNZDJnnnnmDTfc0LNnz6SvA/gQYQdwAMcdd1xlZeXWrVtXrVoVRVH37t1bt26d9FEA\nH0HYAcRSUlLSp0+fpK8AaIwfngAACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACISw\nAwAIhLADOICamprvf//7hx9+eHFxcXFx8eGHH/79739/z549Sd8FsC9hB9CY1atXd+jQYdKk\nSevWrautra2trV23bt2kSZPat2+/Zs2apK8D+BBhB9Cg2traE044Ydu2bb169Vq5cmV1dXV1\ndfXKlSt79eq1devW3r1719bWJn0jwPuEHUCDfvSjH9VX3fLly9u2bfv0008//fTTbdq0Wb58\nea9evbZt2/ajH/0o6RsB3ifsABp03333RVE0fvz4ioqKww477Itf/OIXv/jFjh07VlRUjB8/\nPoqi3/3ud0nfCPC+gqQPAEivjRs3ZjKZ8847L4qic8899+STT46iaOnSpQ888MDTTz+dyWTe\neeedpG8EeJ+wA2hMNptt167dokWLevXqVf+VsWPHvvjii/3793/rrbeSvQ1gHx7FAjSosLAw\niqIf/OAH69evr6ioOOqoo4466qiKior169dfeeWVe98AkBI+sQNoUGlp6ebNm6+66qqampq9\nX1y7du1//dd/NW/evP4NyV0HsC+f2AE06NBDD42iqKamJj8//7LLLtuxY8eOHTvGjBmTn59f\nn3r1bwBICZ/YATRo586dURTl5+fX1tZOmTJl6tSpURTVb9fVf7H+DQApIewAGrRp06Yoin7+\n859HUTR9+vQNGzZEUdS5c+dvfvObtbW1P/zhD+vfAJASwg6gQdXV1VEUTZs2bfHixePGjdv7\n9b/+9a/l5eV73wCQEsIOoEF1dXWZTOa111477rjjLrroolNOOSWKomeeeeaOO+7Yvn17JpOp\nq6tL+kaA9/nhCYAGlZSUZLPZu+66q2PHjjfeeOM555xzzjnn3HjjjWVlZb/5zW+y2WxJSUnS\nNwK8zyd2AA0aOHDgHXfcMWPGjBUrVrz00kuvvPJKFEXHHntsz549zzjjjPo3JH0jwPuEHUCD\nJk+efM899yxevHjIkCFz5sz57Gc/G0XR9u3bhwwZsnjx4qKioltvvTXpGwHeJ+wAGnTIIYcs\nXry4b9++Dz/88KGHHtqmTZsoijZv3lxXV1dYWFjfdknfCPA+f8cOoDEnnXTSunXrhg4d2qJF\ni82bN2/evLlly5ZDhw5dt27dSSedlPR1AB/iEzuAA2jXrt28efOSvgLgwHxiBwAQCGEHABAI\nYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIA8UAsWSz2bfffjuKog4dOmQymaTPAfgI\nPrEDOIB169Z9+9vfbt++fadOnTp16tS+fftvf/vb69atS/ougH35xA6gMc8///yAAQM2b958\n/PHHn3zyyVEULV269Ne//vXcuXP/8z//8/jjj0/6QID3CTuABr377rvDhg2rrq5esGDBoEGD\n9n79oYce+trXvjZ06NBVq1a1bNkywQsBPsijWIAGTZ8+fcOGDTfffPMHqy6KokGDBt18880b\n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\nVAULFgwaNCjpWwA+Wi6FXX7zjj+648mzzrrhnAvHXz124k2z7vtOv64ffENRu5OHDvU7JwhZ\nXV3d1q1bk77iILVx48b6P7ds2ZL0LQepvLy8kpKSpK+AVMulsKvX8ys/evlLZ14x/CuX9v/U\n/Mtuuuemy9oW+LEGDhbDhg2bP39+0lcc1EaNGpX0CQe1IUOGPPjgg0lfAemVe2EXRVFh289N\ne2zNWTddesGPvtdt4cN33Pfbf/5su6SPgqawZs2aQw891F/hT8pbb7112GGHJX3FweuRRx5Z\ns2ZN0ldAquVk2EVRFEX5g78/7c/9B553zoXDjz9y5LV3Jn0PNJEOHTr42SAOTsuXL0/6BEi7\n3H6IWXLskIf/e83NY06bOX5E0rcAACQsdz+x+5u8gjbfvWXhWYPvfuiVLS279Ej6HACAxOR8\n2NXr1u/rY/slfQQAQKJy+1EsAAB7CTsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsA\ngEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7\nAIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAI\nOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBA\nCDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCA\nQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsA\ngEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAIOwCAQAg7AIBACDsAgEAUJH0A8PfZ\nvHlzz549k74CEtCmTZuysrKkr4BU84kdAEAghB0AQCCEHQBAIIQdAEAg/PAE5Jg2bdo8+eST\nSV8BCTj77LOTPgHSzid2AACBEHYAAIEQdgAAgRB2AACBEHYAAIEQdgAAgRB2AACBEHYAAIEQ\ndgAAgRB2AACBEHYAAIEQdgAAgRB2AACBEHYAAIEQdgAAgRB2AACBEHYAAIEQdgAAgRB2AACB\nEHYAAIEQdgAAgRB2AACBEHYAAIEQdgAAgRB2AACBEHYAAIEQdgAAgRB2AACBEHYAAIEQdgAA\n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\nPgGgMbkUdj+5of+Mb8z9zEnn3vzv/3L2GZ9vkfnwj77WVb/ydOVN13xv+trtZ02ZEPN7xvkv\nzYYNG2bMmNGsWbOPdzYAQNPIpbA7+sL7fv38mRdPnTtywP2Z5q27Ht2tU/uSwsJm2ZrqbRvf\neG31ms279uTl5ZWPuW3+pT2SPhYAoKnlUthFUf7oKY8NHDnvtrtmVy5+9tWVf1i9oq7+hbz8\nwi7dju1X3n/E6MuHntA52SsBABKRW2EXRVHUuc+wiX2GTYyiuj1VW7fu2FlV07z4kFYlpcVG\niQGAg1vuhd1eeQXFpe2KS5M+AwAgJXL1h/YBANiHsAMACISwAwAIhLADAAiEsAMACISwAwAI\nhLADAAiEsAMACISwAwAIhLADAAiEsAMACISwAwAIhLADAAiEsAMACERB0gfkjFWrVhUVFSV9\nBQCQsFWrViV9QoOE3YE1a9YsiqKLLroo6UMAgLSoz4O0EXYHdv755+/Zs6eqqirpQwCAVCgu\nLj7//POTvuIj5NXV1SV9AwAAnwA/PAEAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcA\nEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEH\nABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhh\nBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAI\nYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQ\nCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcA\nEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEH\nABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhh\nBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAI\nYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQ\nCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABAIYQcA\nEAhhBwAQCGEHABAIYQcAEAhhBwAQCGEHABCI/wdBk/nyzl8mWwAAAABJRU5ErkJggg=="},"metadata":{"image/png":{"height":420,"width":420}},"output_type":"display_data"}],"source":["# check NA in Age\n","colSums(is.na(titanic_full))\n","bp_Age <- boxplot(titanic_full$Age)\n","\n","# before imputing age with regression with ordinary least square \n","# we need to cut off the outlier first"]},{"cell_type":"code","execution_count":15,"id":"66d5bafc","metadata":{"_cell_guid":"928b880d-1f5b-4182-9cc4-87cf6539c357","_uuid":"f831122e-8f0c-4615-bcbf-b7c23d2f85db","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:01.018812Z","iopub.status.busy":"2022-04-01T13:51:01.016958Z","iopub.status.idle":"2022-04-01T13:51:01.041984Z","shell.execute_reply":"2022-04-01T13:51:01.040582Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.233332,"end_time":"2022-04-01T13:51:01.042112","exception":false,"start_time":"2022-04-01T13:51:00.80878","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<dl>\n","\t<dt>$stats</dt>\n","\t\t<dd><style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>0.17</li><li>21</li><li>28</li><li>39</li><li>66</li></ol>\n","</dd>\n","\t<dt>$n</dt>\n","\t\t<dd>1046</dd>\n","\t<dt>$conf</dt>\n","\t\t<dd><style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>27.1206459871454</li><li>28.8793540128546</li></ol>\n","</dd>\n","\t<dt>$out</dt>\n","\t\t<dd><style>\n",".list-inline {list-style: none; margin:0; padding: 0}\n",".list-inline>li {display: inline-block}\n",".list-inline>li:not(:last-child)::after {content: \"\\00b7\"; padding: 0 .5ex}\n","</style>\n","<ol class=list-inline><li>71</li><li>70.5</li><li>71</li><li>80</li><li>70</li><li>70</li><li>74</li><li>67</li><li>76</li></ol>\n","</dd>\n","</dl>\n"],"text/latex":["\\begin{description}\n","\\item[\\$stats] \\begin{enumerate*}\n","\\item 0.17\n","\\item 21\n","\\item 28\n","\\item 39\n","\\item 66\n","\\end{enumerate*}\n","\n","\\item[\\$n] 1046\n","\\item[\\$conf] \\begin{enumerate*}\n","\\item 27.1206459871454\n","\\item 28.8793540128546\n","\\end{enumerate*}\n","\n","\\item[\\$out] \\begin{enumerate*}\n","\\item 71\n","\\item 70.5\n","\\item 71\n","\\item 80\n","\\item 70\n","\\item 70\n","\\item 74\n","\\item 67\n","\\item 76\n","\\end{enumerate*}\n","\n","\\end{description}\n"],"text/markdown":["$stats\n",":   1. 0.17\n","2. 21\n","3. 28\n","4. 39\n","5. 66\n","\n","\n","\n","$n\n",":   1046\n","$conf\n",":   1. 27.1206459871454\n","2. 28.8793540128546\n","\n","\n","\n","$out\n",":   1. 71\n","2. 70.5\n","3. 71\n","4. 80\n","5. 70\n","6. 70\n","7. 74\n","8. 67\n","9. 76\n","\n","\n","\n","\n","\n"],"text/plain":["$stats\n","[1]  0.17 21.00 28.00 39.00 66.00\n","\n","$n\n","[1] 1046\n","\n","$conf\n","[1] 27.12065 28.87935\n","\n","$out\n","[1] 71.0 70.5 71.0 80.0 70.0 70.0 74.0 67.0 76.0\n"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["65"],"text/latex":["65"],"text/markdown":["65"],"text/plain":["[1] 65"]},"metadata":{},"output_type":"display_data"}],"source":["# find the cutoff point to filter outlier from the upper wishker of a boxplot\n","boxplot.stats(titanic_full$Age)\n","age_upper_wishker <- boxplot.stats(titanic_full$Fare)$stats[5] \n","age_upper_wishker"]},{"cell_type":"code","execution_count":16,"id":"4b2d207e","metadata":{"_cell_guid":"d24df924-d7e0-4841-899a-47968972ac00","_uuid":"3c2770f1-c8aa-4803-b892-7e1e0888889d","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:01.466141Z","iopub.status.busy":"2022-04-01T13:51:01.464471Z","iopub.status.idle":"2022-04-01T13:51:01.484303Z","shell.execute_reply":"2022-04-01T13:51:01.482878Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.234617,"end_time":"2022-04-01T13:51:01.484439","exception":false,"start_time":"2022-04-01T13:51:01.249822","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>263</dd><dt>Survived</dt><dd>593</dd><dt>Pclass</dt><dd>263</dd><dt>Name</dt><dd>263</dd><dt>Sex</dt><dd>263</dd><dt>Age</dt><dd>263</dd><dt>SibSp</dt><dd>263</dd><dt>Parch</dt><dd>263</dd><dt>Ticket</dt><dd>263</dd><dt>Fare</dt><dd>263</dd><dt>Cabin</dt><dd>263</dd><dt>Embarked</dt><dd>263</dd><dt>is_train_set</dt><dd>263</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 263\n","\\item[Survived] 593\n","\\item[Pclass] 263\n","\\item[Name] 263\n","\\item[Sex] 263\n","\\item[Age] 263\n","\\item[SibSp] 263\n","\\item[Parch] 263\n","\\item[Ticket] 263\n","\\item[Fare] 263\n","\\item[Cabin] 263\n","\\item[Embarked] 263\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 263\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   263Survived\n",":   593Pclass\n",":   263Name\n",":   263Sex\n",":   263Age\n",":   263SibSp\n",":   263Parch\n",":   263Ticket\n",":   263Fare\n",":   263Cabin\n",":   263Embarked\n",":   263is_train_set\n",":   263\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","         263          593          263          263          263          263 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","         263          263          263          263          263          263 \n","is_train_set \n","         263 "]},"metadata":{},"output_type":"display_data"}],"source":["# build a filter\n","age_outlier_filter <- titanic_full$Age < age_upper_wishker\n","\n","# filter the titanic_full\n","titanic_filtered_with_age <- titanic_full[age_outlier_filter,]\n","colSums(is.na(titanic_filtered_with_age))"]},{"cell_type":"code","execution_count":17,"id":"7278e482","metadata":{"_cell_guid":"80433f78-d79c-402a-8ee4-52c9443d3cb3","_uuid":"84891674-12fd-43a7-b0bb-d01149b43a94","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:01.911086Z","iopub.status.busy":"2022-04-01T13:51:01.909147Z","iopub.status.idle":"2022-04-01T13:51:01.931774Z","shell.execute_reply":"2022-04-01T13:51:01.930351Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.23691,"end_time":"2022-04-01T13:51:01.931882","exception":false,"start_time":"2022-04-01T13:51:01.694972","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["0"],"text/latex":["0"],"text/markdown":["0"],"text/plain":["[1] 0"]},"metadata":{},"output_type":"display_data"}],"source":["# but if we check the filtered data, some NAs popped up and need to be drop\n","\n","titanic_filtered_with_age_and_without_NA <- titanic_filtered_with_age %>%\n","  select(-Survived, -PassengerId, -Name) %>%\n","  drop_na()\n","\n","sum(is.na(titanic_filtered_with_age_and_without_NA))"]},{"cell_type":"markdown","id":"14dd50f7","metadata":{"_cell_guid":"f4d496a2-c2d6-4f85-9103-271b8c983aa9","_uuid":"e61c9e93-8771-4cf6-9909-5dcfd164c26a","papermill":{"duration":0.213476,"end_time":"2022-04-01T13:51:02.361073","exception":false,"start_time":"2022-04-01T13:51:02.147597","status":"completed"},"tags":[]},"source":["2. Identify and impute missing values in Cabin"]},{"cell_type":"code","execution_count":18,"id":"97dba8dd","metadata":{"_cell_guid":"0b656926-6a1d-4591-9bc7-7c4121687f7c","_uuid":"cb126371-9cea-412c-9c2a-ada976b86fee","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:02.794623Z","iopub.status.busy":"2022-04-01T13:51:02.792677Z","iopub.status.idle":"2022-04-01T13:51:02.828235Z","shell.execute_reply":"2022-04-01T13:51:02.826784Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.254386,"end_time":"2022-04-01T13:51:02.828378","exception":false,"start_time":"2022-04-01T13:51:02.573992","status":"completed"},"tags":[]},"outputs":[{"data":{"text/plain":["\n","Call:\n","lm(formula = age_equation, data = titanic_filtered_with_age_and_without_NA)\n","\n","Coefficients:\n","(Intercept)       Pclass      Sexmale         Fare        SibSp        Parch  \n","  44.435413    -6.616485     2.146224     0.003052    -3.141888    -0.830859  \n","  EmbarkedQ    EmbarkedS       CabinB       CabinC       CabinD       CabinE  \n","   3.089722     1.797913    -1.073720    -0.789348    -1.511860    -0.898188  \n","     CabinF       CabinG       CabinT  \n","  -2.993376    -5.178624     3.128579  \n"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 6 × 7</caption>\n","<thead>\n","\t<tr><th scope=col>Pclass</th><th scope=col>Sex</th><th scope=col>Fare</th><th scope=col>SibSp</th><th scope=col>Parch</th><th scope=col>Embarked</th><th scope=col>Cabin</th></tr>\n","\t<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>3</td><td>male  </td><td> 8.4583</td><td>0</td><td>0</td><td>Q</td><td>C</td></tr>\n","\t<tr><td>2</td><td>male  </td><td>13.0000</td><td>0</td><td>0</td><td>S</td><td>C</td></tr>\n","\t<tr><td>3</td><td>female</td><td> 7.2250</td><td>0</td><td>0</td><td>C</td><td>C</td></tr>\n","\t<tr><td>3</td><td>male  </td><td> 7.2250</td><td>0</td><td>0</td><td>C</td><td>C</td></tr>\n","\t<tr><td>3</td><td>female</td><td> 7.8792</td><td>0</td><td>0</td><td>Q</td><td>F</td></tr>\n","\t<tr><td>3</td><td>male  </td><td> 7.8958</td><td>0</td><td>0</td><td>S</td><td>F</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 6 × 7\n","\\begin{tabular}{lllllll}\n"," Pclass & Sex & Fare & SibSp & Parch & Embarked & Cabin\\\\\n"," <dbl> & <chr> & <dbl> & <dbl> & <dbl> & <chr> & <chr>\\\\\n","\\hline\n","\t 3 & male   &  8.4583 & 0 & 0 & Q & C\\\\\n","\t 2 & male   & 13.0000 & 0 & 0 & S & C\\\\\n","\t 3 & female &  7.2250 & 0 & 0 & C & C\\\\\n","\t 3 & male   &  7.2250 & 0 & 0 & C & C\\\\\n","\t 3 & female &  7.8792 & 0 & 0 & Q & F\\\\\n","\t 3 & male   &  7.8958 & 0 & 0 & S & F\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 6 × 7\n","\n","| Pclass &lt;dbl&gt; | Sex &lt;chr&gt; | Fare &lt;dbl&gt; | SibSp &lt;dbl&gt; | Parch &lt;dbl&gt; | Embarked &lt;chr&gt; | Cabin &lt;chr&gt; |\n","|---|---|---|---|---|---|---|\n","| 3 | male   |  8.4583 | 0 | 0 | Q | C |\n","| 2 | male   | 13.0000 | 0 | 0 | S | C |\n","| 3 | female |  7.2250 | 0 | 0 | C | C |\n","| 3 | male   |  7.2250 | 0 | 0 | C | C |\n","| 3 | female |  7.8792 | 0 | 0 | Q | F |\n","| 3 | male   |  7.8958 | 0 | 0 | S | F |\n","\n"],"text/plain":["  Pclass Sex    Fare    SibSp Parch Embarked Cabin\n","1 3      male    8.4583 0     0     Q        C    \n","2 2      male   13.0000 0     0     S        C    \n","3 3      female  7.2250 0     0     C        C    \n","4 3      male    7.2250 0     0     C        C    \n","5 3      female  7.8792 0     0     Q        F    \n","6 3      male    7.8958 0     0     S        F    "]},"metadata":{},"output_type":"display_data"}],"source":["# to build a model to predict fare, first create the equation\n","age_equation = \"Age ~ Pclass + Sex + Fare + SibSp + Parch + Embarked + Cabin\"\n","age_model <- lm(formula = age_equation, \n","                 data = titanic_filtered_with_age_and_without_NA)\n","age_model\n","# time to predict\n","# new data is data where Fare is missing\n","data_with_missing_age <- titanic_full[is.na(titanic_full$Age), \n","                           c(\"Pclass\", \"Sex\", \"Fare\", \"SibSp\", \"Parch\", \"Embarked\", \"Cabin\")]\n","head(data_with_missing_age)"]},{"cell_type":"code","execution_count":19,"id":"ca86bf17","metadata":{"_cell_guid":"fa4487de-d3e4-4acc-a702-7c8c347f32df","_uuid":"389de560-5263-414b-a660-a805213eb844","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:03.272665Z","iopub.status.busy":"2022-04-01T13:51:03.270863Z","iopub.status.idle":"2022-04-01T13:51:03.29578Z","shell.execute_reply":"2022-04-01T13:51:03.294447Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.245676,"end_time":"2022-04-01T13:51:03.29589","exception":false,"start_time":"2022-04-01T13:51:03.050214","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>1</dt><dd>29.0583731265764</dd><dt>2</dt><dd>34.3969112293059</dd><dt>3</dt><dd>23.818663477713</dd><dt>4</dt><dd>25.9648870112983</dd><dt>5</dt><dd>24.7063544081174</dd><dt>6</dt><dd>25.5608194733598</dd><dt>7</dt><dd>34.0505460303733</dd><dt>8</dt><dd>26.9099876488624</dd><dt>9</dt><dd>25.9648998309585</dd><dt>10</dt><dd>25.966934494175</dd><dt>11</dt><dd>25.5612901380282</dd><dt>12</dt><dd>23.7339509358989</dd><dt>13</dt><dd>26.9099876488624</dd><dt>14</dt><dd>17.5212020207158</dd><dt>15</dt><dd>41.0820725886313</dd><dt>16</dt><dd>40.0497639683564</dd><dt>17</dt><dd>22.8059703372704</dd><dt>18</dt><dd>25.5608194733598</dd><dt>19</dt><dd>25.5612901380282</dd><dt>20</dt><dd>24.7060745122023</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[1] 29.0583731265764\n","\\item[2] 34.3969112293059\n","\\item[3] 23.818663477713\n","\\item[4] 25.9648870112983\n","\\item[5] 24.7063544081174\n","\\item[6] 25.5608194733598\n","\\item[7] 34.0505460303733\n","\\item[8] 26.9099876488624\n","\\item[9] 25.9648998309585\n","\\item[10] 25.966934494175\n","\\item[11] 25.5612901380282\n","\\item[12] 23.7339509358989\n","\\item[13] 26.9099876488624\n","\\item[14] 17.5212020207158\n","\\item[15] 41.0820725886313\n","\\item[16] 40.0497639683564\n","\\item[17] 22.8059703372704\n","\\item[18] 25.5608194733598\n","\\item[19] 25.5612901380282\n","\\item[20] 24.7060745122023\n","\\end{description*}\n"],"text/markdown":["1\n",":   29.05837312657642\n",":   34.39691122930593\n",":   23.8186634777134\n",":   25.96488701129835\n",":   24.70635440811746\n",":   25.56081947335987\n",":   34.05054603037338\n",":   26.90998764886249\n",":   25.964899830958510\n",":   25.96693449417511\n",":   25.561290138028212\n",":   23.733950935898913\n",":   26.909987648862414\n",":   17.521202020715815\n",":   41.082072588631316\n",":   40.049763968356417\n",":   22.805970337270418\n",":   25.560819473359819\n",":   25.561290138028220\n",":   24.7060745122023\n","\n"],"text/plain":["       1        2        3        4        5        6        7        8 \n","29.05837 34.39691 23.81866 25.96489 24.70635 25.56082 34.05055 26.90999 \n","       9       10       11       12       13       14       15       16 \n","25.96490 25.96693 25.56129 23.73395 26.90999 17.52120 41.08207 40.04976 \n","      17       18       19       20 \n","22.80597 25.56082 25.56129 24.70607 "]},"metadata":{},"output_type":"display_data"}],"source":["age_prediction <- predict(age_model, newdata = data_with_missing_age)\n","head(age_prediction, n=20)"]},{"cell_type":"code","execution_count":20,"id":"7ccc9891","metadata":{"_cell_guid":"5f1528ca-1361-4133-b1c6-9dbf36cf3fdd","_uuid":"3d87eab9-fc27-40bd-82ed-c0934ac367fe","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:03.742518Z","iopub.status.busy":"2022-04-01T13:51:03.740767Z","iopub.status.idle":"2022-04-01T13:51:03.759229Z","shell.execute_reply":"2022-04-01T13:51:03.757822Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.242805,"end_time":"2022-04-01T13:51:03.759339","exception":false,"start_time":"2022-04-01T13:51:03.516534","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<style>\n",".dl-inline {width: auto; margin:0; padding: 0}\n",".dl-inline>dt, .dl-inline>dd {float: none; width: auto; display: inline-block}\n",".dl-inline>dt::after {content: \":\\0020\"; padding-right: .5ex}\n",".dl-inline>dt:not(:first-of-type) {padding-left: .5ex}\n","</style><dl class=dl-inline><dt>PassengerId</dt><dd>0</dd><dt>Survived</dt><dd>418</dd><dt>Pclass</dt><dd>0</dd><dt>Name</dt><dd>0</dd><dt>Sex</dt><dd>0</dd><dt>Age</dt><dd>0</dd><dt>SibSp</dt><dd>0</dd><dt>Parch</dt><dd>0</dd><dt>Ticket</dt><dd>0</dd><dt>Fare</dt><dd>0</dd><dt>Cabin</dt><dd>0</dd><dt>Embarked</dt><dd>0</dd><dt>is_train_set</dt><dd>0</dd></dl>\n"],"text/latex":["\\begin{description*}\n","\\item[PassengerId] 0\n","\\item[Survived] 418\n","\\item[Pclass] 0\n","\\item[Name] 0\n","\\item[Sex] 0\n","\\item[Age] 0\n","\\item[SibSp] 0\n","\\item[Parch] 0\n","\\item[Ticket] 0\n","\\item[Fare] 0\n","\\item[Cabin] 0\n","\\item[Embarked] 0\n","\\item[is\\textbackslash{}\\_train\\textbackslash{}\\_set] 0\n","\\end{description*}\n"],"text/markdown":["PassengerId\n",":   0Survived\n",":   418Pclass\n",":   0Name\n",":   0Sex\n",":   0Age\n",":   0SibSp\n",":   0Parch\n",":   0Ticket\n",":   0Fare\n",":   0Cabin\n",":   0Embarked\n",":   0is_train_set\n",":   0\n","\n"],"text/plain":[" PassengerId     Survived       Pclass         Name          Sex          Age \n","           0          418            0            0            0            0 \n","       SibSp        Parch       Ticket         Fare        Cabin     Embarked \n","           0            0            0            0            0            0 \n","is_train_set \n","           0 "]},"metadata":{},"output_type":"display_data"}],"source":["titanic_full[is.na(titanic_full$Age), \"Age\"] <- age_prediction\n","\n","colSums(is.na(titanic_full))"]},{"cell_type":"markdown","id":"9024a389","metadata":{"_cell_guid":"cf03b32b-6a72-4ccb-baea-426b06982e24","_uuid":"27bc2ba8-40b0-42ef-85ff-8a21cf25ba66","papermill":{"duration":0.229385,"end_time":"2022-04-01T13:51:04.222655","exception":false,"start_time":"2022-04-01T13:51:03.99327","status":"completed"},"tags":[]},"source":["<a id=\"section-two\"></a>\n","# *Ask the Ranger*"]},{"cell_type":"markdown","id":"49fef932","metadata":{"_cell_guid":"6addde8b-8095-4d78-bdbc-0b3841657556","_uuid":"0ee4a327-f6ae-4960-8504-8abd6ebe8409","papermill":{"duration":0.221716,"end_time":"2022-04-01T13:51:04.667771","exception":false,"start_time":"2022-04-01T13:51:04.446055","status":"completed"},"tags":[]},"source":["<a id=\"subtwo-1\"></a>\n","### Data Split"]},{"cell_type":"code","execution_count":21,"id":"8db75bed","metadata":{"_cell_guid":"4d545854-cef7-42b8-8413-fcccb9a585f4","_uuid":"f020489b-768b-4c8b-b398-20faf7c2d430","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:05.119454Z","iopub.status.busy":"2022-04-01T13:51:05.117686Z","iopub.status.idle":"2022-04-01T13:51:05.178215Z","shell.execute_reply":"2022-04-01T13:51:05.176815Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.288121,"end_time":"2022-04-01T13:51:05.178338","exception":false,"start_time":"2022-04-01T13:51:04.890217","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A tibble: 1 × 13</caption>\n","<thead>\n","\t<tr><th scope=col>PassengerId</th><th scope=col>Survived</th><th scope=col>Pclass</th><th scope=col>Name</th><th scope=col>Sex</th><th scope=col>Age</th><th scope=col>SibSp</th><th scope=col>Parch</th><th scope=col>Ticket</th><th scope=col>Fare</th><th scope=col>Cabin</th><th scope=col>Embarked</th><th scope=col>is_train_set</th></tr>\n","\t<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>\n","</thead>\n","<tbody>\n","\t<tr><td>1309</td><td>3</td><td>3</td><td>1307</td><td>2</td><td>291</td><td>7</td><td>8</td><td>929</td><td>282</td><td>8</td><td>3</td><td>2</td></tr>\n","</tbody>\n","</table>\n"],"text/latex":["A tibble: 1 × 13\n","\\begin{tabular}{lllllllllllll}\n"," PassengerId & Survived & Pclass & Name & Sex & Age & SibSp & Parch & Ticket & Fare & Cabin & Embarked & is\\_train\\_set\\\\\n"," <int> & <int> & <int> & <int> & <int> & <int> & <int> & <int> & <int> & <int> & <int> & <int> & <int>\\\\\n","\\hline\n","\t 1309 & 3 & 3 & 1307 & 2 & 291 & 7 & 8 & 929 & 282 & 8 & 3 & 2\\\\\n","\\end{tabular}\n"],"text/markdown":["\n","A tibble: 1 × 13\n","\n","| PassengerId &lt;int&gt; | Survived &lt;int&gt; | Pclass &lt;int&gt; | Name &lt;int&gt; | Sex &lt;int&gt; | Age &lt;int&gt; | SibSp &lt;int&gt; | Parch &lt;int&gt; | Ticket &lt;int&gt; | Fare &lt;int&gt; | Cabin &lt;int&gt; | Embarked &lt;int&gt; | is_train_set &lt;int&gt; |\n","|---|---|---|---|---|---|---|---|---|---|---|---|---|\n","| 1309 | 3 | 3 | 1307 | 2 | 291 | 7 | 8 | 929 | 282 | 8 | 3 | 2 |\n","\n"],"text/plain":["  PassengerId Survived Pclass Name Sex Age SibSp Parch Ticket Fare Cabin\n","1 1309        3        3      1307 2   291 7     8     929    282  8    \n","  Embarked is_train_set\n","1 3        2           "]},"metadata":{},"output_type":"display_data"},{"name":"stdout","output_type":"stream","text":["spec_tbl_df [1,309 × 13] (S3: spec_tbl_df/tbl_df/tbl/data.frame)\n"," $ PassengerId : num [1:1309] 1 2 3 4 5 6 7 8 9 10 ...\n"," $ Survived    : num [1:1309] 0 1 1 1 0 0 0 0 1 1 ...\n"," $ Pclass      : Factor w/ 3 levels \"1\",\"2\",\"3\": 3 1 3 1 3 3 1 3 3 2 ...\n"," $ Name        : chr [1:1309] \"Braund, Mr. Owen Harris\" \"Cumings, Mrs. John Bradley (Florence Briggs Thayer)\" \"Heikkinen, Miss. Laina\" \"Futrelle, Mrs. Jacques Heath (Lily May Peel)\" ...\n"," $ Sex         : Factor w/ 2 levels \"female\",\"male\": 2 1 1 1 2 2 2 2 1 1 ...\n"," $ Age         : num [1:1309] 22 38 26 35 35 ...\n"," $ SibSp       : Factor w/ 7 levels \"0\",\"1\",\"2\",\"3\",..: 2 2 1 2 1 1 1 4 1 2 ...\n"," $ Parch       : Factor w/ 8 levels \"0\",\"1\",\"2\",\"3\",..: 1 1 1 1 1 1 1 2 3 1 ...\n"," $ Ticket      : chr [1:1309] \"A/5 21171\" \"PC 17599\" \"STON/O2. 3101282\" \"113803\" ...\n"," $ Fare        : num [1:1309] 7.25 71.28 7.92 53.1 8.05 ...\n"," $ Cabin       : Factor w/ 8 levels \"A\",\"B\",\"C\",\"D\",..: 3 3 3 3 3 3 5 3 3 3 ...\n"," $ Embarked    : Factor w/ 3 levels \"C\",\"Q\",\"S\": 3 1 3 3 3 2 3 3 3 1 ...\n"," $ is_train_set: logi [1:1309] TRUE TRUE TRUE TRUE TRUE TRUE ...\n"," - attr(*, \"spec\")=\n","  .. cols(\n","  ..   PassengerId = \u001b[32mcol_double()\u001b[39m,\n","  ..   Survived = \u001b[32mcol_double()\u001b[39m,\n","  ..   Pclass = \u001b[32mcol_double()\u001b[39m,\n","  ..   Name = \u001b[31mcol_character()\u001b[39m,\n","  ..   Sex = \u001b[31mcol_character()\u001b[39m,\n","  ..   Age = \u001b[32mcol_double()\u001b[39m,\n","  ..   SibSp = \u001b[32mcol_double()\u001b[39m,\n","  ..   Parch = \u001b[32mcol_double()\u001b[39m,\n","  ..   Ticket = \u001b[31mcol_character()\u001b[39m,\n","  ..   Fare = \u001b[32mcol_double()\u001b[39m,\n","  ..   Cabin = \u001b[31mcol_character()\u001b[39m,\n","  ..   Embarked = \u001b[31mcol_character()\u001b[39m\n","  .. )\n"," - attr(*, \"problems\")=<externalptr> \n"]}],"source":["# look at the data before deciding on categorical casting\n","titanic_full %>%\n","  summarize_all(n_distinct)\n","\n","# now cast Pclass, Sex, Sibsp, Parch, Cabin, and Embarked into factor\n","titanic_full_cat_casted2 <- titanic_full %>%\n","  mutate(Pclass = as.factor(Pclass),\n","         Sex = as.factor(Sex),\n","         SibSp = as.factor(SibSp),\n","         Parch = as.factor(Parch),\n","         Cabin = as.factor(Cabin),\n","         Embarked = as.factor(Embarked)\n","  )\n","str(titanic_full_cat_casted2)"]},{"cell_type":"code","execution_count":22,"id":"de155106","metadata":{"_cell_guid":"0749ca56-ecf8-46db-9a7c-b2e39d21c89a","_uuid":"12e995c9-13d3-4cb9-848f-a351f48f30c8","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:05.632459Z","iopub.status.busy":"2022-04-01T13:51:05.630695Z","iopub.status.idle":"2022-04-01T13:51:05.662288Z","shell.execute_reply":"2022-04-01T13:51:05.660875Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.259457,"end_time":"2022-04-01T13:51:05.662429","exception":false,"start_time":"2022-04-01T13:51:05.402972","status":"completed"},"tags":[]},"outputs":[{"data":{"text/plain":["     ttr2\n","ttr   13 891\n","  13   1   0\n","  891  0   1"]},"metadata":{},"output_type":"display_data"},{"data":{"text/plain":["     tt2\n","tt    13 418\n","  13   1   0\n","  418  0   1"]},"metadata":{},"output_type":"display_data"},{"data":{"text/html":["0"],"text/latex":["0"],"text/markdown":["0"],"text/plain":["[1] 0"]},"metadata":{},"output_type":"display_data"}],"source":["# split the dataframe back into its  train and set\n","\n","titanic_train_2 <- titanic_full_cat_casted2[titanic_full_cat_casted2$is_train_set == TRUE,]\n","titanic_test_2 <- titanic_full_cat_casted2[titanic_full_cat_casted2$is_train_set == FALSE,]\n","\n","# compare dim\n","table(ttr = dim(titanic_train), \n","      ttr2 = dim(titanic_train_2)) # same\n","table(tt = dim(titanic_test),\n","      tt2 = dim(titanic_test_2)) # same\n","\n","# now turn Survived into factor\n","sum(is.na(titanic_train_2$Survived))\n","titanic_train_2$Survived <- as.factor(titanic_train_2$Survived)"]},{"cell_type":"markdown","id":"bcec08d7","metadata":{"_cell_guid":"f4d4e5ff-9a1b-4c13-b1a4-82f15439e6bd","_uuid":"c45e99bf-f9c5-4af5-bba9-56fc9d43aa95","papermill":{"duration":0.231874,"end_time":"2022-04-01T13:51:06.134408","exception":false,"start_time":"2022-04-01T13:51:05.902534","status":"completed"},"tags":[]},"source":["<a id=\"subtwo-2\"></a>\n","### Random Forest Prediction"]},{"cell_type":"code","execution_count":23,"id":"9257b5fe","metadata":{"_cell_guid":"c2b84b06-9821-4663-b156-7bce0011430f","_uuid":"ceb734bb-b4a1-44c3-bf9e-64bbe339907f","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:06.603305Z","iopub.status.busy":"2022-04-01T13:51:06.601482Z","iopub.status.idle":"2022-04-01T13:51:07.944341Z","shell.execute_reply":"2022-04-01T13:51:07.94268Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":1.578165,"end_time":"2022-04-01T13:51:07.944499","exception":false,"start_time":"2022-04-01T13:51:06.366334","status":"completed"},"tags":[]},"outputs":[{"data":{"text/html":["<table class=\"dataframe\">\n","<caption>A matrix: 0 × 17 of type chr</caption>\n","<thead>\n","\t<tr><th scope=col>Package</th><th scope=col>LibPath</th><th scope=col>Version</th><th scope=col>Priority</th><th scope=col>Depends</th><th scope=col>Imports</th><th scope=col>LinkingTo</th><th scope=col>Suggests</th><th scope=col>Enhances</th><th scope=col>License</th><th scope=col>License_is_FOSS</th><th scope=col>License_restricts_use</th><th scope=col>OS_type</th><th scope=col>Archs</th><th scope=col>MD5sum</th><th scope=col>NeedsCompilation</th><th scope=col>Built</th></tr>\n","</thead>\n","<tbody>\n","</tbody>\n","</table>\n"],"text/latex":["A matrix: 0 × 17 of type chr\n","\\begin{tabular}{lllllllllllllllll}\n"," Package & LibPath & Version & Priority & Depends & Imports & LinkingTo & Suggests & Enhances & License & License\\_is\\_FOSS & License\\_restricts\\_use & OS\\_type & Archs & MD5sum & NeedsCompilation & Built\\\\\n","\\hline\n","\\end{tabular}\n"],"text/markdown":["\n","A matrix: 0 × 17 of type chr\n","\n","| Package | LibPath | Version | Priority | Depends | Imports | LinkingTo | Suggests | Enhances | License | License_is_FOSS | License_restricts_use | OS_type | Archs | MD5sum | NeedsCompilation | Built |\n","|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|---|\n","\n"],"text/plain":["     Package LibPath Version Priority Depends Imports LinkingTo Suggests\n","     Enhances License License_is_FOSS License_restricts_use OS_type Archs\n","     MD5sum NeedsCompilation Built"]},"metadata":{},"output_type":"display_data"},{"data":{"text/plain":["Ranger result\n","\n","Call:\n"," ranger(formula = survived_formula, data = titanic_train_2, num.trees = 1000,      seed = 99, classification = TRUE) \n","\n","Type:                             Classification \n","Number of trees:                  1000 \n","Sample size:                      891 \n","Number of independent variables:  8 \n","Mtry:                             2 \n","Target node size:                 1 \n","Variable importance mode:         none \n","Splitrule:                        gini \n","OOB prediction error:             17.51 % "]},"metadata":{},"output_type":"display_data"}],"source":["# write a formula \n","survived_equation = \"Survived ~ Pclass + Sex + Age + SibSp + Parch + Fare + Cabin + Embarked\"\n","survived_formula <- as.formula(survived_equation)\n","\n","installed.packages(\"ranger\")\n","library(\"ranger\")\n","\n","titanic_ranger_model <- ranger(formula = survived_formula, \n","                               data = titanic_train_2,\n","                               num.trees = 1000,\n","                               seed = 99,\n","                               classification = TRUE)\n","\n","titanic_ranger_model"]},{"cell_type":"code","execution_count":24,"id":"b33de2ed","metadata":{"_cell_guid":"0c5e90f1-2cf6-4ec1-bbc4-d618b5926c30","_uuid":"6af11d65-82df-4a75-b5ad-b9f308327b12","collapsed":false,"execution":{"iopub.execute_input":"2022-04-01T13:51:08.441918Z","iopub.status.busy":"2022-04-01T13:51:08.440109Z","iopub.status.idle":"2022-04-01T13:51:08.557831Z","shell.execute_reply":"2022-04-01T13:51:08.555843Z"},"jupyter":{"outputs_hidden":false},"papermill":{"duration":0.355457,"end_time":"2022-04-01T13:51:08.557946","exception":false,"start_time":"2022-04-01T13:51:08.202489","status":"completed"},"tags":[]},"outputs":[{"name":"stdout","output_type":"stream","text":["List of 5\n"," $ predictions              : Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 1 1 1 2 1 ...\n"," $ num.trees                : num 1000\n"," $ num.independent.variables: num 8\n"," $ num.samples              : int 418\n"," $ treetype                 : chr \"Classification\"\n"," - attr(*, \"class\")= chr \"ranger.prediction\"\n","'data.frame':\t418 obs. of  2 variables:\n"," $ PassengerId: num  892 893 894 895 896 897 898 899 900 901 ...\n"," $ Survived   : Factor w/ 2 levels \"0\",\"1\": 1 1 1 1 1 1 1 1 2 1 ...\n"]}],"source":["titanic_survived <- predict(titanic_ranger_model, data = titanic_test_2)\n","str(titanic_survived)\n","\n","\n","PassengerId <- titanic_test_2$PassengerId\n","titanic_output <- as.data.frame(PassengerId)\n","titanic_output$Survived <- titanic_survived$predictions\n","str(titanic_output)\n","\n","write_csv(x=titanic_output,file=\"./submission\",col_names = TRUE)"]}],"metadata":{"kernelspec":{"display_name":"R","language":"R","name":"ir"},"language_info":{"codemirror_mode":"r","file_extension":".r","mimetype":"text/x-r-source","name":"R","pygments_lexer":"r","version":"4.0.5"},"papermill":{"default_parameters":{},"duration":23.743968,"end_time":"2022-04-01T13:51:08.984954","environment_variables":{},"exception":null,"input_path":"__notebook__.ipynb","output_path":"__notebook__.ipynb","parameters":{},"start_time":"2022-04-01T13:50:45.240986","version":"2.3.3"}},"nbformat":4,"nbformat_minor":5}